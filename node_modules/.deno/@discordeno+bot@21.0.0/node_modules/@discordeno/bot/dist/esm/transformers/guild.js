import { ChannelTypes } from '@discordeno/types';
import { Collection, iconHashToBigInt } from '@discordeno/utils';
import { GuildToggles } from './toggles/guild.js';
export const baseGuild = {
    // This allows typescript to still check for type errors on functions below
    ...undefined,
    get threads () {
        if (!this.channels) return new Collection();
        const threads = this.channels.array().filter((x)=>x.type === ChannelTypes.PublicThread || x.type === ChannelTypes.PrivateThread || x.type === ChannelTypes.AnnouncementThread);
        return new Collection(threads.map((x)=>[
                x.id,
                x
            ]));
    },
    get features () {
        return this.toggles.features;
    }
};
export function transformGuild(bot, payload) {
    const guildId = bot.transformers.snowflake(payload.guild.id);
    const props = bot.transformers.desiredProperties.guild;
    const guild = Object.create(baseGuild);
    if (props.afkTimeout && payload.guild.afk_timeout) guild.afkTimeout = payload.guild.afk_timeout;
    if (props.approximateMemberCount && payload.guild.approximate_member_count) guild.approximateMemberCount = payload.guild.approximate_member_count;
    if (props.approximatePresenceCount && payload.guild.approximate_presence_count) guild.approximatePresenceCount = payload.guild.approximate_presence_count;
    if (props.defaultMessageNotifications) guild.defaultMessageNotifications = payload.guild.default_message_notifications;
    if (props.description && payload.guild.description) guild.description = payload.guild.description;
    if (props.toggles) guild.toggles = new GuildToggles(payload.guild);
    if (props.explicitContentFilter) guild.explicitContentFilter = payload.guild.explicit_content_filter;
    if (props.maxMembers && payload.guild.max_members) guild.maxMembers = payload.guild.max_members;
    if (props.maxPresences && payload.guild.max_presences) guild.maxPresences = payload.guild.max_presences ?? undefined;
    if (props.maxVideoChannelUsers && payload.guild.max_video_channel_users) guild.maxVideoChannelUsers = payload.guild.max_video_channel_users;
    if (props.maxStageVideoChannelUsers && payload.guild.max_stage_video_channel_users) guild.maxStageVideoChannelUsers = payload.guild.max_stage_video_channel_users;
    if (props.mfaLevel) guild.mfaLevel = payload.guild.mfa_level;
    if (props.name && payload.guild.name) guild.name = payload.guild.name;
    if (props.nsfwLevel) guild.nsfwLevel = payload.guild.nsfw_level;
    if (props.preferredLocale && payload.guild.preferred_locale) guild.preferredLocale = payload.guild.preferred_locale;
    if (props.premiumSubscriptionCount && payload.guild.premium_subscription_count !== undefined) guild.premiumSubscriptionCount = payload.guild.premium_subscription_count;
    if (props.premiumTier) guild.premiumTier = payload.guild.premium_tier;
    if (props.stageInstances && payload.guild.stage_instances) guild.stageInstances = payload.guild.stage_instances.map((si)=>({
            /** The id of this Stage instance */ id: bot.transformers.snowflake(si.id),
            /** The guild id of the associated Stage channel */ guildId,
            /** The id of the associated Stage channel */ channelId: bot.transformers.snowflake(si.channel_id),
            /** The topic of the Stage instance (1-120 characters) */ topic: si.topic
        }));
    if (props.channels && (!!payload.guild.channels || !!payload.guild.threads)) guild.channels = new Collection([
        ...payload.guild.channels ?? [],
        ...payload.guild.threads ?? []
    ].map((channel)=>{
        const result = bot.transformers.channel(bot, {
            channel,
            guildId
        });
        return [
            result.id,
            result
        ];
    }));
    if (props.members && payload.guild.members) guild.members = new Collection(payload.guild.members.map((member)=>{
        const result = bot.transformers.member(bot, member, guildId, bot.transformers.snowflake(member.user.id));
        return [
            result.id,
            result
        ];
    }));
    if (props.roles && payload.guild.roles) guild.roles = new Collection(payload.guild.roles.map((role)=>{
        const result = bot.transformers.role(bot, {
            role,
            guildId
        });
        return [
            result.id,
            result
        ];
    }));
    if (props.emojis && payload.guild.emojis) guild.emojis = new Collection(payload.guild.emojis.map((emoji)=>{
        const result = bot.transformers.emoji(bot, emoji);
        return [
            result.id,
            result
        ];
    }));
    if (props.voiceStates && payload.guild.voice_states) guild.voiceStates = new Collection(payload.guild.voice_states.map((voiceState)=>{
        const result = bot.transformers.voiceState(bot, {
            voiceState,
            guildId
        });
        return [
            result.userId,
            result
        ];
    }));
    if (props.stickers && payload.guild.stickers) guild.stickers = new Collection(payload.guild.stickers?.map((sticker)=>{
        const result = bot.transformers.sticker(bot, sticker);
        return [
            result.id,
            result
        ];
    }));
    if (props.systemChannelFlags && payload.guild.system_channel_flags) guild.systemChannelFlags = payload.guild.system_channel_flags;
    if (props.vanityUrlCode && payload.guild.vanity_url_code) guild.vanityUrlCode = payload.guild.vanity_url_code;
    if (props.verificationLevel) guild.verificationLevel = payload.guild.verification_level;
    if (props.welcomeScreen && payload.guild.welcome_screen) guild.welcomeScreen = {
        description: payload.guild.welcome_screen.description ?? undefined,
        welcomeChannels: payload.guild.welcome_screen.welcome_channels.map((wc)=>({
                channelId: bot.transformers.snowflake(wc.channel_id),
                description: wc.description,
                emojiId: wc.emoji_id ? bot.transformers.snowflake(wc.emoji_id) : undefined,
                emojiName: wc.emoji_name ?? undefined
            }))
    };
    if (props.discoverySplash && payload.guild.discovery_splash) guild.discoverySplash = iconHashToBigInt(payload.guild.discovery_splash);
    if (props.joinedAt && payload.guild.joined_at) guild.joinedAt = Date.parse(payload.guild.joined_at);
    if (props.memberCount && payload.guild.member_count) guild.memberCount = payload.guild.member_count ?? 0;
    if (props.shardId) guild.shardId = payload.shardId;
    if (props.icon && payload.guild.icon) guild.icon = iconHashToBigInt(payload.guild.icon);
    if (props.banner && payload.guild.banner) guild.banner = iconHashToBigInt(payload.guild.banner);
    if (props.splash && payload.guild.splash) guild.splash = iconHashToBigInt(payload.guild.splash);
    if (props.id && payload.guild.id) guild.id = guildId;
    if (props.ownerId && payload.guild.owner_id) guild.ownerId = bot.transformers.snowflake(payload.guild.owner_id);
    if (props.permissions && payload.guild.permissions) guild.permissions = bot.transformers.snowflake(payload.guild.permissions);
    if (props.afkChannelId && payload.guild.afk_channel_id) guild.afkChannelId = bot.transformers.snowflake(payload.guild.afk_channel_id);
    if (props.widgetChannelId && payload.guild.widget_channel_id) guild.widgetChannelId = bot.transformers.snowflake(payload.guild.widget_channel_id);
    if (props.applicationId && payload.guild.application_id) guild.applicationId = bot.transformers.snowflake(payload.guild.application_id);
    if (props.systemChannelId && payload.guild.system_channel_id) guild.systemChannelId = bot.transformers.snowflake(payload.guild.system_channel_id);
    if (props.rulesChannelId && payload.guild.rules_channel_id) guild.rulesChannelId = bot.transformers.snowflake(payload.guild.rules_channel_id);
    if (props.publicUpdatesChannelId && payload.guild.public_updates_channel_id) guild.publicUpdatesChannelId = bot.transformers.snowflake(payload.guild.public_updates_channel_id);
    if (props.premiumProgressBarEnabled && payload.guild.premium_progress_bar_enabled) guild.premiumProgressBarEnabled = payload.guild.premium_progress_bar_enabled;
    if (props.large && payload.guild.large) guild.large = payload.guild.large;
    if (props.owner && payload.guild.owner) guild.owner = payload.guild.owner;
    if (props.widgetEnabled && payload.guild.widget_enabled) guild.widgetEnabled = payload.guild.widget_enabled;
    if (props.unavailable && payload.guild.unavailable) guild.unavailable = payload.guild.unavailable;
    if (props.iconHash && payload.guild.icon_hash) guild.iconHash = iconHashToBigInt(payload.guild.icon_hash);
    if (props.presences && payload.guild.presences) guild.presences = payload.guild.presences?.map((presence)=>bot.transformers.presence(bot, presence));
    if (props.safetyAlertsChannelId && payload.guild.safety_alerts_channel_id) guild.safetyAlertsChannelId = bot.transformers.snowflake(payload.guild.safety_alerts_channel_id);
    return bot.transformers.customizers.guild(bot, payload.guild, guild);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvZ3VpbGQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ2hhbm5lbFR5cGVzLCB0eXBlIERpc2NvcmRHdWlsZCwgdHlwZSBEaXNjb3JkUHJlc2VuY2VVcGRhdGUgfSBmcm9tICdAZGlzY29yZGVuby90eXBlcydcbmltcG9ydCB7IENvbGxlY3Rpb24sIGljb25IYXNoVG9CaWdJbnQgfSBmcm9tICdAZGlzY29yZGVuby91dGlscydcbmltcG9ydCB0eXBlIHsgQ2hhbm5lbCwgR3VpbGQsIEludGVybmFsQm90IH0gZnJvbSAnLi4vaW5kZXguanMnXG5pbXBvcnQgeyBHdWlsZFRvZ2dsZXMgfSBmcm9tICcuL3RvZ2dsZXMvZ3VpbGQuanMnXG5cbmV4cG9ydCBjb25zdCBiYXNlR3VpbGQ6IEludGVybmFsQm90Wyd0cmFuc2Zvcm1lcnMnXVsnJGluZmVycmVkVHlwZXMnXVsnZ3VpbGQnXSA9IHtcbiAgLy8gVGhpcyBhbGxvd3MgdHlwZXNjcmlwdCB0byBzdGlsbCBjaGVjayBmb3IgdHlwZSBlcnJvcnMgb24gZnVuY3Rpb25zIGJlbG93XG4gIC4uLih1bmRlZmluZWQgYXMgdW5rbm93biBhcyBJbnRlcm5hbEJvdFsndHJhbnNmb3JtZXJzJ11bJyRpbmZlcnJlZFR5cGVzJ11bJ2d1aWxkJ10pLFxuXG4gIGdldCB0aHJlYWRzKCkge1xuICAgIGlmICghdGhpcy5jaGFubmVscykgcmV0dXJuIG5ldyBDb2xsZWN0aW9uPGJpZ2ludCwgQ2hhbm5lbD4oKVxuXG4gICAgY29uc3QgdGhyZWFkcyA9IHRoaXMuY2hhbm5lbHNcbiAgICAgIC5hcnJheSgpXG4gICAgICAuZmlsdGVyKCh4KSA9PiB4LnR5cGUgPT09IENoYW5uZWxUeXBlcy5QdWJsaWNUaHJlYWQgfHwgeC50eXBlID09PSBDaGFubmVsVHlwZXMuUHJpdmF0ZVRocmVhZCB8fCB4LnR5cGUgPT09IENoYW5uZWxUeXBlcy5Bbm5vdW5jZW1lbnRUaHJlYWQpXG5cbiAgICByZXR1cm4gbmV3IENvbGxlY3Rpb24odGhyZWFkcy5tYXAoKHgpID0+IFt4LmlkLCB4XSkpXG4gIH0sXG4gIGdldCBmZWF0dXJlcygpIHtcbiAgICByZXR1cm4gdGhpcy50b2dnbGVzLmZlYXR1cmVzXG4gIH0sXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1HdWlsZChib3Q6IEludGVybmFsQm90LCBwYXlsb2FkOiB7IGd1aWxkOiBEaXNjb3JkR3VpbGQ7IHNoYXJkSWQ6IG51bWJlciB9KTogdHlwZW9mIGJvdC50cmFuc2Zvcm1lcnMuJGluZmVycmVkVHlwZXMuZ3VpbGQge1xuICBjb25zdCBndWlsZElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZC5pZClcbiAgY29uc3QgcHJvcHMgPSBib3QudHJhbnNmb3JtZXJzLmRlc2lyZWRQcm9wZXJ0aWVzLmd1aWxkXG4gIGNvbnN0IGd1aWxkOiBHdWlsZCA9IE9iamVjdC5jcmVhdGUoYmFzZUd1aWxkKVxuXG4gIGlmIChwcm9wcy5hZmtUaW1lb3V0ICYmIHBheWxvYWQuZ3VpbGQuYWZrX3RpbWVvdXQpIGd1aWxkLmFma1RpbWVvdXQgPSBwYXlsb2FkLmd1aWxkLmFma190aW1lb3V0XG4gIGlmIChwcm9wcy5hcHByb3hpbWF0ZU1lbWJlckNvdW50ICYmIHBheWxvYWQuZ3VpbGQuYXBwcm94aW1hdGVfbWVtYmVyX2NvdW50KSBndWlsZC5hcHByb3hpbWF0ZU1lbWJlckNvdW50ID0gcGF5bG9hZC5ndWlsZC5hcHByb3hpbWF0ZV9tZW1iZXJfY291bnRcbiAgaWYgKHByb3BzLmFwcHJveGltYXRlUHJlc2VuY2VDb3VudCAmJiBwYXlsb2FkLmd1aWxkLmFwcHJveGltYXRlX3ByZXNlbmNlX2NvdW50KVxuICAgIGd1aWxkLmFwcHJveGltYXRlUHJlc2VuY2VDb3VudCA9IHBheWxvYWQuZ3VpbGQuYXBwcm94aW1hdGVfcHJlc2VuY2VfY291bnRcbiAgaWYgKHByb3BzLmRlZmF1bHRNZXNzYWdlTm90aWZpY2F0aW9ucykgZ3VpbGQuZGVmYXVsdE1lc3NhZ2VOb3RpZmljYXRpb25zID0gcGF5bG9hZC5ndWlsZC5kZWZhdWx0X21lc3NhZ2Vfbm90aWZpY2F0aW9uc1xuICBpZiAocHJvcHMuZGVzY3JpcHRpb24gJiYgcGF5bG9hZC5ndWlsZC5kZXNjcmlwdGlvbikgZ3VpbGQuZGVzY3JpcHRpb24gPSBwYXlsb2FkLmd1aWxkLmRlc2NyaXB0aW9uXG4gIGlmIChwcm9wcy50b2dnbGVzKSBndWlsZC50b2dnbGVzID0gbmV3IEd1aWxkVG9nZ2xlcyhwYXlsb2FkLmd1aWxkKVxuICBpZiAocHJvcHMuZXhwbGljaXRDb250ZW50RmlsdGVyKSBndWlsZC5leHBsaWNpdENvbnRlbnRGaWx0ZXIgPSBwYXlsb2FkLmd1aWxkLmV4cGxpY2l0X2NvbnRlbnRfZmlsdGVyXG4gIGlmIChwcm9wcy5tYXhNZW1iZXJzICYmIHBheWxvYWQuZ3VpbGQubWF4X21lbWJlcnMpIGd1aWxkLm1heE1lbWJlcnMgPSBwYXlsb2FkLmd1aWxkLm1heF9tZW1iZXJzXG4gIGlmIChwcm9wcy5tYXhQcmVzZW5jZXMgJiYgcGF5bG9hZC5ndWlsZC5tYXhfcHJlc2VuY2VzKSBndWlsZC5tYXhQcmVzZW5jZXMgPSBwYXlsb2FkLmd1aWxkLm1heF9wcmVzZW5jZXMgPz8gdW5kZWZpbmVkXG4gIGlmIChwcm9wcy5tYXhWaWRlb0NoYW5uZWxVc2VycyAmJiBwYXlsb2FkLmd1aWxkLm1heF92aWRlb19jaGFubmVsX3VzZXJzKSBndWlsZC5tYXhWaWRlb0NoYW5uZWxVc2VycyA9IHBheWxvYWQuZ3VpbGQubWF4X3ZpZGVvX2NoYW5uZWxfdXNlcnNcbiAgaWYgKHByb3BzLm1heFN0YWdlVmlkZW9DaGFubmVsVXNlcnMgJiYgcGF5bG9hZC5ndWlsZC5tYXhfc3RhZ2VfdmlkZW9fY2hhbm5lbF91c2VycylcbiAgICBndWlsZC5tYXhTdGFnZVZpZGVvQ2hhbm5lbFVzZXJzID0gcGF5bG9hZC5ndWlsZC5tYXhfc3RhZ2VfdmlkZW9fY2hhbm5lbF91c2Vyc1xuICBpZiAocHJvcHMubWZhTGV2ZWwpIGd1aWxkLm1mYUxldmVsID0gcGF5bG9hZC5ndWlsZC5tZmFfbGV2ZWxcbiAgaWYgKHByb3BzLm5hbWUgJiYgcGF5bG9hZC5ndWlsZC5uYW1lKSBndWlsZC5uYW1lID0gcGF5bG9hZC5ndWlsZC5uYW1lXG4gIGlmIChwcm9wcy5uc2Z3TGV2ZWwpIGd1aWxkLm5zZndMZXZlbCA9IHBheWxvYWQuZ3VpbGQubnNmd19sZXZlbFxuICBpZiAocHJvcHMucHJlZmVycmVkTG9jYWxlICYmIHBheWxvYWQuZ3VpbGQucHJlZmVycmVkX2xvY2FsZSkgZ3VpbGQucHJlZmVycmVkTG9jYWxlID0gcGF5bG9hZC5ndWlsZC5wcmVmZXJyZWRfbG9jYWxlXG4gIGlmIChwcm9wcy5wcmVtaXVtU3Vic2NyaXB0aW9uQ291bnQgJiYgcGF5bG9hZC5ndWlsZC5wcmVtaXVtX3N1YnNjcmlwdGlvbl9jb3VudCAhPT0gdW5kZWZpbmVkKVxuICAgIGd1aWxkLnByZW1pdW1TdWJzY3JpcHRpb25Db3VudCA9IHBheWxvYWQuZ3VpbGQucHJlbWl1bV9zdWJzY3JpcHRpb25fY291bnRcbiAgaWYgKHByb3BzLnByZW1pdW1UaWVyKSBndWlsZC5wcmVtaXVtVGllciA9IHBheWxvYWQuZ3VpbGQucHJlbWl1bV90aWVyXG4gIGlmIChwcm9wcy5zdGFnZUluc3RhbmNlcyAmJiBwYXlsb2FkLmd1aWxkLnN0YWdlX2luc3RhbmNlcylcbiAgICBndWlsZC5zdGFnZUluc3RhbmNlcyA9IHBheWxvYWQuZ3VpbGQuc3RhZ2VfaW5zdGFuY2VzLm1hcCgoc2kpID0+ICh7XG4gICAgICAvKiogVGhlIGlkIG9mIHRoaXMgU3RhZ2UgaW5zdGFuY2UgKi9cbiAgICAgIGlkOiBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShzaS5pZCksXG4gICAgICAvKiogVGhlIGd1aWxkIGlkIG9mIHRoZSBhc3NvY2lhdGVkIFN0YWdlIGNoYW5uZWwgKi9cbiAgICAgIGd1aWxkSWQsXG4gICAgICAvKiogVGhlIGlkIG9mIHRoZSBhc3NvY2lhdGVkIFN0YWdlIGNoYW5uZWwgKi9cbiAgICAgIGNoYW5uZWxJZDogYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2Uoc2kuY2hhbm5lbF9pZCksXG4gICAgICAvKiogVGhlIHRvcGljIG9mIHRoZSBTdGFnZSBpbnN0YW5jZSAoMS0xMjAgY2hhcmFjdGVycykgKi9cbiAgICAgIHRvcGljOiBzaS50b3BpYyxcbiAgICB9KSlcbiAgaWYgKHByb3BzLmNoYW5uZWxzICYmICghIXBheWxvYWQuZ3VpbGQuY2hhbm5lbHMgfHwgISFwYXlsb2FkLmd1aWxkLnRocmVhZHMpKVxuICAgIGd1aWxkLmNoYW5uZWxzID0gbmV3IENvbGxlY3Rpb24oXG4gICAgICBbLi4uKHBheWxvYWQuZ3VpbGQuY2hhbm5lbHMgPz8gW10pLCAuLi4ocGF5bG9hZC5ndWlsZC50aHJlYWRzID8/IFtdKV0ubWFwKChjaGFubmVsKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJvdC50cmFuc2Zvcm1lcnMuY2hhbm5lbChib3QsIHsgY2hhbm5lbCwgZ3VpbGRJZCB9KVxuICAgICAgICByZXR1cm4gW3Jlc3VsdC5pZCwgcmVzdWx0XVxuICAgICAgfSksXG4gICAgKVxuICBpZiAocHJvcHMubWVtYmVycyAmJiBwYXlsb2FkLmd1aWxkLm1lbWJlcnMpXG4gICAgZ3VpbGQubWVtYmVycyA9IG5ldyBDb2xsZWN0aW9uKFxuICAgICAgcGF5bG9hZC5ndWlsZC5tZW1iZXJzLm1hcCgobWVtYmVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJvdC50cmFuc2Zvcm1lcnMubWVtYmVyKGJvdCwgbWVtYmVyLCBndWlsZElkLCBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShtZW1iZXIudXNlciEuaWQpKVxuICAgICAgICByZXR1cm4gW3Jlc3VsdC5pZCwgcmVzdWx0XVxuICAgICAgfSksXG4gICAgKVxuICBpZiAocHJvcHMucm9sZXMgJiYgcGF5bG9hZC5ndWlsZC5yb2xlcylcbiAgICBndWlsZC5yb2xlcyA9IG5ldyBDb2xsZWN0aW9uKFxuICAgICAgcGF5bG9hZC5ndWlsZC5yb2xlcy5tYXAoKHJvbGUpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYm90LnRyYW5zZm9ybWVycy5yb2xlKGJvdCwgeyByb2xlLCBndWlsZElkIH0pXG4gICAgICAgIHJldHVybiBbcmVzdWx0LmlkLCByZXN1bHRdXG4gICAgICB9KSxcbiAgICApXG4gIGlmIChwcm9wcy5lbW9qaXMgJiYgcGF5bG9hZC5ndWlsZC5lbW9qaXMpXG4gICAgZ3VpbGQuZW1vamlzID0gbmV3IENvbGxlY3Rpb24oXG4gICAgICBwYXlsb2FkLmd1aWxkLmVtb2ppcy5tYXAoKGVtb2ppKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJvdC50cmFuc2Zvcm1lcnMuZW1vamkoYm90LCBlbW9qaSlcbiAgICAgICAgcmV0dXJuIFtyZXN1bHQuaWQhLCByZXN1bHRdXG4gICAgICB9KSxcbiAgICApXG4gIGlmIChwcm9wcy52b2ljZVN0YXRlcyAmJiBwYXlsb2FkLmd1aWxkLnZvaWNlX3N0YXRlcylcbiAgICBndWlsZC52b2ljZVN0YXRlcyA9IG5ldyBDb2xsZWN0aW9uKFxuICAgICAgcGF5bG9hZC5ndWlsZC52b2ljZV9zdGF0ZXMubWFwKCh2b2ljZVN0YXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGJvdC50cmFuc2Zvcm1lcnMudm9pY2VTdGF0ZShib3QsIHsgdm9pY2VTdGF0ZSwgZ3VpbGRJZCB9KVxuICAgICAgICByZXR1cm4gW3Jlc3VsdC51c2VySWQsIHJlc3VsdF1cbiAgICAgIH0pLFxuICAgIClcbiAgaWYgKHByb3BzLnN0aWNrZXJzICYmIHBheWxvYWQuZ3VpbGQuc3RpY2tlcnMpXG4gICAgZ3VpbGQuc3RpY2tlcnMgPSBuZXcgQ29sbGVjdGlvbihcbiAgICAgIHBheWxvYWQuZ3VpbGQuc3RpY2tlcnM/Lm1hcCgoc3RpY2tlcikgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBib3QudHJhbnNmb3JtZXJzLnN0aWNrZXIoYm90LCBzdGlja2VyKVxuICAgICAgICByZXR1cm4gW3Jlc3VsdC5pZCwgcmVzdWx0XVxuICAgICAgfSksXG4gICAgKVxuICBpZiAocHJvcHMuc3lzdGVtQ2hhbm5lbEZsYWdzICYmIHBheWxvYWQuZ3VpbGQuc3lzdGVtX2NoYW5uZWxfZmxhZ3MpIGd1aWxkLnN5c3RlbUNoYW5uZWxGbGFncyA9IHBheWxvYWQuZ3VpbGQuc3lzdGVtX2NoYW5uZWxfZmxhZ3NcbiAgaWYgKHByb3BzLnZhbml0eVVybENvZGUgJiYgcGF5bG9hZC5ndWlsZC52YW5pdHlfdXJsX2NvZGUpIGd1aWxkLnZhbml0eVVybENvZGUgPSBwYXlsb2FkLmd1aWxkLnZhbml0eV91cmxfY29kZVxuICBpZiAocHJvcHMudmVyaWZpY2F0aW9uTGV2ZWwpIGd1aWxkLnZlcmlmaWNhdGlvbkxldmVsID0gcGF5bG9hZC5ndWlsZC52ZXJpZmljYXRpb25fbGV2ZWxcbiAgaWYgKHByb3BzLndlbGNvbWVTY3JlZW4gJiYgcGF5bG9hZC5ndWlsZC53ZWxjb21lX3NjcmVlbilcbiAgICBndWlsZC53ZWxjb21lU2NyZWVuID0ge1xuICAgICAgZGVzY3JpcHRpb246IHBheWxvYWQuZ3VpbGQud2VsY29tZV9zY3JlZW4uZGVzY3JpcHRpb24gPz8gdW5kZWZpbmVkLFxuICAgICAgd2VsY29tZUNoYW5uZWxzOiBwYXlsb2FkLmd1aWxkLndlbGNvbWVfc2NyZWVuLndlbGNvbWVfY2hhbm5lbHMubWFwKCh3YykgPT4gKHtcbiAgICAgICAgY2hhbm5lbElkOiBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZSh3Yy5jaGFubmVsX2lkKSxcbiAgICAgICAgZGVzY3JpcHRpb246IHdjLmRlc2NyaXB0aW9uLFxuICAgICAgICBlbW9qaUlkOiB3Yy5lbW9qaV9pZCA/IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHdjLmVtb2ppX2lkKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgZW1vamlOYW1lOiB3Yy5lbW9qaV9uYW1lID8/IHVuZGVmaW5lZCxcbiAgICAgIH0pKSxcbiAgICB9XG4gIGlmIChwcm9wcy5kaXNjb3ZlcnlTcGxhc2ggJiYgcGF5bG9hZC5ndWlsZC5kaXNjb3Zlcnlfc3BsYXNoKSBndWlsZC5kaXNjb3ZlcnlTcGxhc2ggPSBpY29uSGFzaFRvQmlnSW50KHBheWxvYWQuZ3VpbGQuZGlzY292ZXJ5X3NwbGFzaClcbiAgaWYgKHByb3BzLmpvaW5lZEF0ICYmIHBheWxvYWQuZ3VpbGQuam9pbmVkX2F0KSBndWlsZC5qb2luZWRBdCA9IERhdGUucGFyc2UocGF5bG9hZC5ndWlsZC5qb2luZWRfYXQpXG4gIGlmIChwcm9wcy5tZW1iZXJDb3VudCAmJiBwYXlsb2FkLmd1aWxkLm1lbWJlcl9jb3VudCkgZ3VpbGQubWVtYmVyQ291bnQgPSBwYXlsb2FkLmd1aWxkLm1lbWJlcl9jb3VudCA/PyAwXG4gIGlmIChwcm9wcy5zaGFyZElkKSBndWlsZC5zaGFyZElkID0gcGF5bG9hZC5zaGFyZElkXG4gIGlmIChwcm9wcy5pY29uICYmIHBheWxvYWQuZ3VpbGQuaWNvbikgZ3VpbGQuaWNvbiA9IGljb25IYXNoVG9CaWdJbnQocGF5bG9hZC5ndWlsZC5pY29uKVxuICBpZiAocHJvcHMuYmFubmVyICYmIHBheWxvYWQuZ3VpbGQuYmFubmVyKSBndWlsZC5iYW5uZXIgPSBpY29uSGFzaFRvQmlnSW50KHBheWxvYWQuZ3VpbGQuYmFubmVyKVxuICBpZiAocHJvcHMuc3BsYXNoICYmIHBheWxvYWQuZ3VpbGQuc3BsYXNoKSBndWlsZC5zcGxhc2ggPSBpY29uSGFzaFRvQmlnSW50KHBheWxvYWQuZ3VpbGQuc3BsYXNoKVxuICBpZiAocHJvcHMuaWQgJiYgcGF5bG9hZC5ndWlsZC5pZCkgZ3VpbGQuaWQgPSBndWlsZElkXG4gIGlmIChwcm9wcy5vd25lcklkICYmIHBheWxvYWQuZ3VpbGQub3duZXJfaWQpIGd1aWxkLm93bmVySWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmd1aWxkLm93bmVyX2lkKVxuICBpZiAocHJvcHMucGVybWlzc2lvbnMgJiYgcGF5bG9hZC5ndWlsZC5wZXJtaXNzaW9ucykgZ3VpbGQucGVybWlzc2lvbnMgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmd1aWxkLnBlcm1pc3Npb25zKVxuICBpZiAocHJvcHMuYWZrQ2hhbm5lbElkICYmIHBheWxvYWQuZ3VpbGQuYWZrX2NoYW5uZWxfaWQpIGd1aWxkLmFma0NoYW5uZWxJZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuZ3VpbGQuYWZrX2NoYW5uZWxfaWQpXG4gIGlmIChwcm9wcy53aWRnZXRDaGFubmVsSWQgJiYgcGF5bG9hZC5ndWlsZC53aWRnZXRfY2hhbm5lbF9pZCkgZ3VpbGQud2lkZ2V0Q2hhbm5lbElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZC53aWRnZXRfY2hhbm5lbF9pZClcbiAgaWYgKHByb3BzLmFwcGxpY2F0aW9uSWQgJiYgcGF5bG9hZC5ndWlsZC5hcHBsaWNhdGlvbl9pZCkgZ3VpbGQuYXBwbGljYXRpb25JZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuZ3VpbGQuYXBwbGljYXRpb25faWQpXG4gIGlmIChwcm9wcy5zeXN0ZW1DaGFubmVsSWQgJiYgcGF5bG9hZC5ndWlsZC5zeXN0ZW1fY2hhbm5lbF9pZCkgZ3VpbGQuc3lzdGVtQ2hhbm5lbElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZC5zeXN0ZW1fY2hhbm5lbF9pZClcbiAgaWYgKHByb3BzLnJ1bGVzQ2hhbm5lbElkICYmIHBheWxvYWQuZ3VpbGQucnVsZXNfY2hhbm5lbF9pZCkgZ3VpbGQucnVsZXNDaGFubmVsSWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmd1aWxkLnJ1bGVzX2NoYW5uZWxfaWQpXG4gIGlmIChwcm9wcy5wdWJsaWNVcGRhdGVzQ2hhbm5lbElkICYmIHBheWxvYWQuZ3VpbGQucHVibGljX3VwZGF0ZXNfY2hhbm5lbF9pZClcbiAgICBndWlsZC5wdWJsaWNVcGRhdGVzQ2hhbm5lbElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZC5wdWJsaWNfdXBkYXRlc19jaGFubmVsX2lkKVxuICBpZiAocHJvcHMucHJlbWl1bVByb2dyZXNzQmFyRW5hYmxlZCAmJiBwYXlsb2FkLmd1aWxkLnByZW1pdW1fcHJvZ3Jlc3NfYmFyX2VuYWJsZWQpXG4gICAgZ3VpbGQucHJlbWl1bVByb2dyZXNzQmFyRW5hYmxlZCA9IHBheWxvYWQuZ3VpbGQucHJlbWl1bV9wcm9ncmVzc19iYXJfZW5hYmxlZFxuICBpZiAocHJvcHMubGFyZ2UgJiYgcGF5bG9hZC5ndWlsZC5sYXJnZSkgZ3VpbGQubGFyZ2UgPSBwYXlsb2FkLmd1aWxkLmxhcmdlXG4gIGlmIChwcm9wcy5vd25lciAmJiBwYXlsb2FkLmd1aWxkLm93bmVyKSBndWlsZC5vd25lciA9IHBheWxvYWQuZ3VpbGQub3duZXJcbiAgaWYgKHByb3BzLndpZGdldEVuYWJsZWQgJiYgcGF5bG9hZC5ndWlsZC53aWRnZXRfZW5hYmxlZCkgZ3VpbGQud2lkZ2V0RW5hYmxlZCA9IHBheWxvYWQuZ3VpbGQud2lkZ2V0X2VuYWJsZWRcbiAgaWYgKHByb3BzLnVuYXZhaWxhYmxlICYmIHBheWxvYWQuZ3VpbGQudW5hdmFpbGFibGUpIGd1aWxkLnVuYXZhaWxhYmxlID0gcGF5bG9hZC5ndWlsZC51bmF2YWlsYWJsZVxuICBpZiAocHJvcHMuaWNvbkhhc2ggJiYgcGF5bG9hZC5ndWlsZC5pY29uX2hhc2gpIGd1aWxkLmljb25IYXNoID0gaWNvbkhhc2hUb0JpZ0ludChwYXlsb2FkLmd1aWxkLmljb25faGFzaClcbiAgaWYgKHByb3BzLnByZXNlbmNlcyAmJiBwYXlsb2FkLmd1aWxkLnByZXNlbmNlcylcbiAgICBndWlsZC5wcmVzZW5jZXMgPSBwYXlsb2FkLmd1aWxkLnByZXNlbmNlcz8ubWFwKChwcmVzZW5jZSkgPT4gYm90LnRyYW5zZm9ybWVycy5wcmVzZW5jZShib3QsIHByZXNlbmNlIGFzIERpc2NvcmRQcmVzZW5jZVVwZGF0ZSkpXG4gIGlmIChwcm9wcy5zYWZldHlBbGVydHNDaGFubmVsSWQgJiYgcGF5bG9hZC5ndWlsZC5zYWZldHlfYWxlcnRzX2NoYW5uZWxfaWQpXG4gICAgZ3VpbGQuc2FmZXR5QWxlcnRzQ2hhbm5lbElkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5ndWlsZC5zYWZldHlfYWxlcnRzX2NoYW5uZWxfaWQpXG5cbiAgcmV0dXJuIGJvdC50cmFuc2Zvcm1lcnMuY3VzdG9taXplcnMuZ3VpbGQoYm90LCBwYXlsb2FkLmd1aWxkLCBndWlsZClcbn1cbiJdLCJuYW1lcyI6WyJDaGFubmVsVHlwZXMiLCJDb2xsZWN0aW9uIiwiaWNvbkhhc2hUb0JpZ0ludCIsIkd1aWxkVG9nZ2xlcyIsImJhc2VHdWlsZCIsInVuZGVmaW5lZCIsInRocmVhZHMiLCJjaGFubmVscyIsImFycmF5IiwiZmlsdGVyIiwieCIsInR5cGUiLCJQdWJsaWNUaHJlYWQiLCJQcml2YXRlVGhyZWFkIiwiQW5ub3VuY2VtZW50VGhyZWFkIiwibWFwIiwiaWQiLCJmZWF0dXJlcyIsInRvZ2dsZXMiLCJ0cmFuc2Zvcm1HdWlsZCIsImJvdCIsInBheWxvYWQiLCJndWlsZElkIiwidHJhbnNmb3JtZXJzIiwic25vd2ZsYWtlIiwiZ3VpbGQiLCJwcm9wcyIsImRlc2lyZWRQcm9wZXJ0aWVzIiwiT2JqZWN0IiwiY3JlYXRlIiwiYWZrVGltZW91dCIsImFma190aW1lb3V0IiwiYXBwcm94aW1hdGVNZW1iZXJDb3VudCIsImFwcHJveGltYXRlX21lbWJlcl9jb3VudCIsImFwcHJveGltYXRlUHJlc2VuY2VDb3VudCIsImFwcHJveGltYXRlX3ByZXNlbmNlX2NvdW50IiwiZGVmYXVsdE1lc3NhZ2VOb3RpZmljYXRpb25zIiwiZGVmYXVsdF9tZXNzYWdlX25vdGlmaWNhdGlvbnMiLCJkZXNjcmlwdGlvbiIsImV4cGxpY2l0Q29udGVudEZpbHRlciIsImV4cGxpY2l0X2NvbnRlbnRfZmlsdGVyIiwibWF4TWVtYmVycyIsIm1heF9tZW1iZXJzIiwibWF4UHJlc2VuY2VzIiwibWF4X3ByZXNlbmNlcyIsIm1heFZpZGVvQ2hhbm5lbFVzZXJzIiwibWF4X3ZpZGVvX2NoYW5uZWxfdXNlcnMiLCJtYXhTdGFnZVZpZGVvQ2hhbm5lbFVzZXJzIiwibWF4X3N0YWdlX3ZpZGVvX2NoYW5uZWxfdXNlcnMiLCJtZmFMZXZlbCIsIm1mYV9sZXZlbCIsIm5hbWUiLCJuc2Z3TGV2ZWwiLCJuc2Z3X2xldmVsIiwicHJlZmVycmVkTG9jYWxlIiwicHJlZmVycmVkX2xvY2FsZSIsInByZW1pdW1TdWJzY3JpcHRpb25Db3VudCIsInByZW1pdW1fc3Vic2NyaXB0aW9uX2NvdW50IiwicHJlbWl1bVRpZXIiLCJwcmVtaXVtX3RpZXIiLCJzdGFnZUluc3RhbmNlcyIsInN0YWdlX2luc3RhbmNlcyIsInNpIiwiY2hhbm5lbElkIiwiY2hhbm5lbF9pZCIsInRvcGljIiwiY2hhbm5lbCIsInJlc3VsdCIsIm1lbWJlcnMiLCJtZW1iZXIiLCJ1c2VyIiwicm9sZXMiLCJyb2xlIiwiZW1vamlzIiwiZW1vamkiLCJ2b2ljZVN0YXRlcyIsInZvaWNlX3N0YXRlcyIsInZvaWNlU3RhdGUiLCJ1c2VySWQiLCJzdGlja2VycyIsInN0aWNrZXIiLCJzeXN0ZW1DaGFubmVsRmxhZ3MiLCJzeXN0ZW1fY2hhbm5lbF9mbGFncyIsInZhbml0eVVybENvZGUiLCJ2YW5pdHlfdXJsX2NvZGUiLCJ2ZXJpZmljYXRpb25MZXZlbCIsInZlcmlmaWNhdGlvbl9sZXZlbCIsIndlbGNvbWVTY3JlZW4iLCJ3ZWxjb21lX3NjcmVlbiIsIndlbGNvbWVDaGFubmVscyIsIndlbGNvbWVfY2hhbm5lbHMiLCJ3YyIsImVtb2ppSWQiLCJlbW9qaV9pZCIsImVtb2ppTmFtZSIsImVtb2ppX25hbWUiLCJkaXNjb3ZlcnlTcGxhc2giLCJkaXNjb3Zlcnlfc3BsYXNoIiwiam9pbmVkQXQiLCJqb2luZWRfYXQiLCJEYXRlIiwicGFyc2UiLCJtZW1iZXJDb3VudCIsIm1lbWJlcl9jb3VudCIsInNoYXJkSWQiLCJpY29uIiwiYmFubmVyIiwic3BsYXNoIiwib3duZXJJZCIsIm93bmVyX2lkIiwicGVybWlzc2lvbnMiLCJhZmtDaGFubmVsSWQiLCJhZmtfY2hhbm5lbF9pZCIsIndpZGdldENoYW5uZWxJZCIsIndpZGdldF9jaGFubmVsX2lkIiwiYXBwbGljYXRpb25JZCIsImFwcGxpY2F0aW9uX2lkIiwic3lzdGVtQ2hhbm5lbElkIiwic3lzdGVtX2NoYW5uZWxfaWQiLCJydWxlc0NoYW5uZWxJZCIsInJ1bGVzX2NoYW5uZWxfaWQiLCJwdWJsaWNVcGRhdGVzQ2hhbm5lbElkIiwicHVibGljX3VwZGF0ZXNfY2hhbm5lbF9pZCIsInByZW1pdW1Qcm9ncmVzc0JhckVuYWJsZWQiLCJwcmVtaXVtX3Byb2dyZXNzX2Jhcl9lbmFibGVkIiwibGFyZ2UiLCJvd25lciIsIndpZGdldEVuYWJsZWQiLCJ3aWRnZXRfZW5hYmxlZCIsInVuYXZhaWxhYmxlIiwiaWNvbkhhc2giLCJpY29uX2hhc2giLCJwcmVzZW5jZXMiLCJwcmVzZW5jZSIsInNhZmV0eUFsZXJ0c0NoYW5uZWxJZCIsInNhZmV0eV9hbGVydHNfY2hhbm5lbF9pZCIsImN1c3RvbWl6ZXJzIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxZQUFZLFFBQXVELG9CQUFtQjtBQUMvRixTQUFTQyxVQUFVLEVBQUVDLGdCQUFnQixRQUFRLG9CQUFtQjtBQUVoRSxTQUFTQyxZQUFZLFFBQVEscUJBQW9CO0FBRWpELE9BQU8sTUFBTUMsWUFBb0U7SUFDL0UsMkVBQTJFO0lBQzNFLEdBQUlDLFNBQVM7SUFFYixJQUFJQyxXQUFVO1FBQ1osSUFBSSxDQUFDLElBQUksQ0FBQ0MsUUFBUSxFQUFFLE9BQU8sSUFBSU47UUFFL0IsTUFBTUssVUFBVSxJQUFJLENBQUNDLFFBQVEsQ0FDMUJDLEtBQUssR0FDTEMsTUFBTSxDQUFDLENBQUNDLElBQU1BLEVBQUVDLElBQUksS0FBS1gsYUFBYVksWUFBWSxJQUFJRixFQUFFQyxJQUFJLEtBQUtYLGFBQWFhLGFBQWEsSUFBSUgsRUFBRUMsSUFBSSxLQUFLWCxhQUFhYyxrQkFBa0I7UUFFNUksT0FBTyxJQUFJYixXQUFXSyxRQUFRUyxHQUFHLENBQUMsQ0FBQ0wsSUFBTTtnQkFBQ0EsRUFBRU0sRUFBRTtnQkFBRU47YUFBRTtJQUNwRDtJQUNBLElBQUlPLFlBQVc7UUFDYixPQUFPLElBQUksQ0FBQ0MsT0FBTyxDQUFDRCxRQUFRO0lBQzlCO0FBQ0YsRUFBQztBQUVELE9BQU8sU0FBU0UsZUFBZUMsR0FBZ0IsRUFBRUMsT0FBaUQ7SUFDaEcsTUFBTUMsVUFBVUYsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNILFFBQVFJLEtBQUssQ0FBQ1QsRUFBRTtJQUMzRCxNQUFNVSxRQUFRTixJQUFJRyxZQUFZLENBQUNJLGlCQUFpQixDQUFDRixLQUFLO0lBQ3RELE1BQU1BLFFBQWVHLE9BQU9DLE1BQU0sQ0FBQ3pCO0lBRW5DLElBQUlzQixNQUFNSSxVQUFVLElBQUlULFFBQVFJLEtBQUssQ0FBQ00sV0FBVyxFQUFFTixNQUFNSyxVQUFVLEdBQUdULFFBQVFJLEtBQUssQ0FBQ00sV0FBVztJQUMvRixJQUFJTCxNQUFNTSxzQkFBc0IsSUFBSVgsUUFBUUksS0FBSyxDQUFDUSx3QkFBd0IsRUFBRVIsTUFBTU8sc0JBQXNCLEdBQUdYLFFBQVFJLEtBQUssQ0FBQ1Esd0JBQXdCO0lBQ2pKLElBQUlQLE1BQU1RLHdCQUF3QixJQUFJYixRQUFRSSxLQUFLLENBQUNVLDBCQUEwQixFQUM1RVYsTUFBTVMsd0JBQXdCLEdBQUdiLFFBQVFJLEtBQUssQ0FBQ1UsMEJBQTBCO0lBQzNFLElBQUlULE1BQU1VLDJCQUEyQixFQUFFWCxNQUFNVywyQkFBMkIsR0FBR2YsUUFBUUksS0FBSyxDQUFDWSw2QkFBNkI7SUFDdEgsSUFBSVgsTUFBTVksV0FBVyxJQUFJakIsUUFBUUksS0FBSyxDQUFDYSxXQUFXLEVBQUViLE1BQU1hLFdBQVcsR0FBR2pCLFFBQVFJLEtBQUssQ0FBQ2EsV0FBVztJQUNqRyxJQUFJWixNQUFNUixPQUFPLEVBQUVPLE1BQU1QLE9BQU8sR0FBRyxJQUFJZixhQUFha0IsUUFBUUksS0FBSztJQUNqRSxJQUFJQyxNQUFNYSxxQkFBcUIsRUFBRWQsTUFBTWMscUJBQXFCLEdBQUdsQixRQUFRSSxLQUFLLENBQUNlLHVCQUF1QjtJQUNwRyxJQUFJZCxNQUFNZSxVQUFVLElBQUlwQixRQUFRSSxLQUFLLENBQUNpQixXQUFXLEVBQUVqQixNQUFNZ0IsVUFBVSxHQUFHcEIsUUFBUUksS0FBSyxDQUFDaUIsV0FBVztJQUMvRixJQUFJaEIsTUFBTWlCLFlBQVksSUFBSXRCLFFBQVFJLEtBQUssQ0FBQ21CLGFBQWEsRUFBRW5CLE1BQU1rQixZQUFZLEdBQUd0QixRQUFRSSxLQUFLLENBQUNtQixhQUFhLElBQUl2QztJQUMzRyxJQUFJcUIsTUFBTW1CLG9CQUFvQixJQUFJeEIsUUFBUUksS0FBSyxDQUFDcUIsdUJBQXVCLEVBQUVyQixNQUFNb0Isb0JBQW9CLEdBQUd4QixRQUFRSSxLQUFLLENBQUNxQix1QkFBdUI7SUFDM0ksSUFBSXBCLE1BQU1xQix5QkFBeUIsSUFBSTFCLFFBQVFJLEtBQUssQ0FBQ3VCLDZCQUE2QixFQUNoRnZCLE1BQU1zQix5QkFBeUIsR0FBRzFCLFFBQVFJLEtBQUssQ0FBQ3VCLDZCQUE2QjtJQUMvRSxJQUFJdEIsTUFBTXVCLFFBQVEsRUFBRXhCLE1BQU13QixRQUFRLEdBQUc1QixRQUFRSSxLQUFLLENBQUN5QixTQUFTO0lBQzVELElBQUl4QixNQUFNeUIsSUFBSSxJQUFJOUIsUUFBUUksS0FBSyxDQUFDMEIsSUFBSSxFQUFFMUIsTUFBTTBCLElBQUksR0FBRzlCLFFBQVFJLEtBQUssQ0FBQzBCLElBQUk7SUFDckUsSUFBSXpCLE1BQU0wQixTQUFTLEVBQUUzQixNQUFNMkIsU0FBUyxHQUFHL0IsUUFBUUksS0FBSyxDQUFDNEIsVUFBVTtJQUMvRCxJQUFJM0IsTUFBTTRCLGVBQWUsSUFBSWpDLFFBQVFJLEtBQUssQ0FBQzhCLGdCQUFnQixFQUFFOUIsTUFBTTZCLGVBQWUsR0FBR2pDLFFBQVFJLEtBQUssQ0FBQzhCLGdCQUFnQjtJQUNuSCxJQUFJN0IsTUFBTThCLHdCQUF3QixJQUFJbkMsUUFBUUksS0FBSyxDQUFDZ0MsMEJBQTBCLEtBQUtwRCxXQUNqRm9CLE1BQU0rQix3QkFBd0IsR0FBR25DLFFBQVFJLEtBQUssQ0FBQ2dDLDBCQUEwQjtJQUMzRSxJQUFJL0IsTUFBTWdDLFdBQVcsRUFBRWpDLE1BQU1pQyxXQUFXLEdBQUdyQyxRQUFRSSxLQUFLLENBQUNrQyxZQUFZO0lBQ3JFLElBQUlqQyxNQUFNa0MsY0FBYyxJQUFJdkMsUUFBUUksS0FBSyxDQUFDb0MsZUFBZSxFQUN2RHBDLE1BQU1tQyxjQUFjLEdBQUd2QyxRQUFRSSxLQUFLLENBQUNvQyxlQUFlLENBQUM5QyxHQUFHLENBQUMsQ0FBQytDLEtBQVEsQ0FBQTtZQUNoRSxrQ0FBa0MsR0FDbEM5QyxJQUFJSSxJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ3NDLEdBQUc5QyxFQUFFO1lBQ3BDLGlEQUFpRCxHQUNqRE07WUFDQSwyQ0FBMkMsR0FDM0N5QyxXQUFXM0MsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNzQyxHQUFHRSxVQUFVO1lBQ25ELHVEQUF1RCxHQUN2REMsT0FBT0gsR0FBR0csS0FBSztRQUNqQixDQUFBO0lBQ0YsSUFBSXZDLE1BQU1uQixRQUFRLElBQUssQ0FBQSxDQUFDLENBQUNjLFFBQVFJLEtBQUssQ0FBQ2xCLFFBQVEsSUFBSSxDQUFDLENBQUNjLFFBQVFJLEtBQUssQ0FBQ25CLE9BQU8sQUFBRCxHQUN2RW1CLE1BQU1sQixRQUFRLEdBQUcsSUFBSU4sV0FDbkI7V0FBS29CLFFBQVFJLEtBQUssQ0FBQ2xCLFFBQVEsSUFBSSxFQUFFO1dBQU9jLFFBQVFJLEtBQUssQ0FBQ25CLE9BQU8sSUFBSSxFQUFFO0tBQUUsQ0FBQ1MsR0FBRyxDQUFDLENBQUNtRDtRQUN6RSxNQUFNQyxTQUFTL0MsSUFBSUcsWUFBWSxDQUFDMkMsT0FBTyxDQUFDOUMsS0FBSztZQUFFOEM7WUFBUzVDO1FBQVE7UUFDaEUsT0FBTztZQUFDNkMsT0FBT25ELEVBQUU7WUFBRW1EO1NBQU87SUFDNUI7SUFFSixJQUFJekMsTUFBTTBDLE9BQU8sSUFBSS9DLFFBQVFJLEtBQUssQ0FBQzJDLE9BQU8sRUFDeEMzQyxNQUFNMkMsT0FBTyxHQUFHLElBQUluRSxXQUNsQm9CLFFBQVFJLEtBQUssQ0FBQzJDLE9BQU8sQ0FBQ3JELEdBQUcsQ0FBQyxDQUFDc0Q7UUFDekIsTUFBTUYsU0FBUy9DLElBQUlHLFlBQVksQ0FBQzhDLE1BQU0sQ0FBQ2pELEtBQUtpRCxRQUFRL0MsU0FBU0YsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUM2QyxPQUFPQyxJQUFJLENBQUV0RCxFQUFFO1FBQ3ZHLE9BQU87WUFBQ21ELE9BQU9uRCxFQUFFO1lBQUVtRDtTQUFPO0lBQzVCO0lBRUosSUFBSXpDLE1BQU02QyxLQUFLLElBQUlsRCxRQUFRSSxLQUFLLENBQUM4QyxLQUFLLEVBQ3BDOUMsTUFBTThDLEtBQUssR0FBRyxJQUFJdEUsV0FDaEJvQixRQUFRSSxLQUFLLENBQUM4QyxLQUFLLENBQUN4RCxHQUFHLENBQUMsQ0FBQ3lEO1FBQ3ZCLE1BQU1MLFNBQVMvQyxJQUFJRyxZQUFZLENBQUNpRCxJQUFJLENBQUNwRCxLQUFLO1lBQUVvRDtZQUFNbEQ7UUFBUTtRQUMxRCxPQUFPO1lBQUM2QyxPQUFPbkQsRUFBRTtZQUFFbUQ7U0FBTztJQUM1QjtJQUVKLElBQUl6QyxNQUFNK0MsTUFBTSxJQUFJcEQsUUFBUUksS0FBSyxDQUFDZ0QsTUFBTSxFQUN0Q2hELE1BQU1nRCxNQUFNLEdBQUcsSUFBSXhFLFdBQ2pCb0IsUUFBUUksS0FBSyxDQUFDZ0QsTUFBTSxDQUFDMUQsR0FBRyxDQUFDLENBQUMyRDtRQUN4QixNQUFNUCxTQUFTL0MsSUFBSUcsWUFBWSxDQUFDbUQsS0FBSyxDQUFDdEQsS0FBS3NEO1FBQzNDLE9BQU87WUFBQ1AsT0FBT25ELEVBQUU7WUFBR21EO1NBQU87SUFDN0I7SUFFSixJQUFJekMsTUFBTWlELFdBQVcsSUFBSXRELFFBQVFJLEtBQUssQ0FBQ21ELFlBQVksRUFDakRuRCxNQUFNa0QsV0FBVyxHQUFHLElBQUkxRSxXQUN0Qm9CLFFBQVFJLEtBQUssQ0FBQ21ELFlBQVksQ0FBQzdELEdBQUcsQ0FBQyxDQUFDOEQ7UUFDOUIsTUFBTVYsU0FBUy9DLElBQUlHLFlBQVksQ0FBQ3NELFVBQVUsQ0FBQ3pELEtBQUs7WUFBRXlEO1lBQVl2RDtRQUFRO1FBQ3RFLE9BQU87WUFBQzZDLE9BQU9XLE1BQU07WUFBRVg7U0FBTztJQUNoQztJQUVKLElBQUl6QyxNQUFNcUQsUUFBUSxJQUFJMUQsUUFBUUksS0FBSyxDQUFDc0QsUUFBUSxFQUMxQ3RELE1BQU1zRCxRQUFRLEdBQUcsSUFBSTlFLFdBQ25Cb0IsUUFBUUksS0FBSyxDQUFDc0QsUUFBUSxFQUFFaEUsSUFBSSxDQUFDaUU7UUFDM0IsTUFBTWIsU0FBUy9DLElBQUlHLFlBQVksQ0FBQ3lELE9BQU8sQ0FBQzVELEtBQUs0RDtRQUM3QyxPQUFPO1lBQUNiLE9BQU9uRCxFQUFFO1lBQUVtRDtTQUFPO0lBQzVCO0lBRUosSUFBSXpDLE1BQU11RCxrQkFBa0IsSUFBSTVELFFBQVFJLEtBQUssQ0FBQ3lELG9CQUFvQixFQUFFekQsTUFBTXdELGtCQUFrQixHQUFHNUQsUUFBUUksS0FBSyxDQUFDeUQsb0JBQW9CO0lBQ2pJLElBQUl4RCxNQUFNeUQsYUFBYSxJQUFJOUQsUUFBUUksS0FBSyxDQUFDMkQsZUFBZSxFQUFFM0QsTUFBTTBELGFBQWEsR0FBRzlELFFBQVFJLEtBQUssQ0FBQzJELGVBQWU7SUFDN0csSUFBSTFELE1BQU0yRCxpQkFBaUIsRUFBRTVELE1BQU00RCxpQkFBaUIsR0FBR2hFLFFBQVFJLEtBQUssQ0FBQzZELGtCQUFrQjtJQUN2RixJQUFJNUQsTUFBTTZELGFBQWEsSUFBSWxFLFFBQVFJLEtBQUssQ0FBQytELGNBQWMsRUFDckQvRCxNQUFNOEQsYUFBYSxHQUFHO1FBQ3BCakQsYUFBYWpCLFFBQVFJLEtBQUssQ0FBQytELGNBQWMsQ0FBQ2xELFdBQVcsSUFBSWpDO1FBQ3pEb0YsaUJBQWlCcEUsUUFBUUksS0FBSyxDQUFDK0QsY0FBYyxDQUFDRSxnQkFBZ0IsQ0FBQzNFLEdBQUcsQ0FBQyxDQUFDNEUsS0FBUSxDQUFBO2dCQUMxRTVCLFdBQVczQyxJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ21FLEdBQUczQixVQUFVO2dCQUNuRDFCLGFBQWFxRCxHQUFHckQsV0FBVztnQkFDM0JzRCxTQUFTRCxHQUFHRSxRQUFRLEdBQUd6RSxJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ21FLEdBQUdFLFFBQVEsSUFBSXhGO2dCQUNqRXlGLFdBQVdILEdBQUdJLFVBQVUsSUFBSTFGO1lBQzlCLENBQUE7SUFDRjtJQUNGLElBQUlxQixNQUFNc0UsZUFBZSxJQUFJM0UsUUFBUUksS0FBSyxDQUFDd0UsZ0JBQWdCLEVBQUV4RSxNQUFNdUUsZUFBZSxHQUFHOUYsaUJBQWlCbUIsUUFBUUksS0FBSyxDQUFDd0UsZ0JBQWdCO0lBQ3BJLElBQUl2RSxNQUFNd0UsUUFBUSxJQUFJN0UsUUFBUUksS0FBSyxDQUFDMEUsU0FBUyxFQUFFMUUsTUFBTXlFLFFBQVEsR0FBR0UsS0FBS0MsS0FBSyxDQUFDaEYsUUFBUUksS0FBSyxDQUFDMEUsU0FBUztJQUNsRyxJQUFJekUsTUFBTTRFLFdBQVcsSUFBSWpGLFFBQVFJLEtBQUssQ0FBQzhFLFlBQVksRUFBRTlFLE1BQU02RSxXQUFXLEdBQUdqRixRQUFRSSxLQUFLLENBQUM4RSxZQUFZLElBQUk7SUFDdkcsSUFBSTdFLE1BQU04RSxPQUFPLEVBQUUvRSxNQUFNK0UsT0FBTyxHQUFHbkYsUUFBUW1GLE9BQU87SUFDbEQsSUFBSTlFLE1BQU0rRSxJQUFJLElBQUlwRixRQUFRSSxLQUFLLENBQUNnRixJQUFJLEVBQUVoRixNQUFNZ0YsSUFBSSxHQUFHdkcsaUJBQWlCbUIsUUFBUUksS0FBSyxDQUFDZ0YsSUFBSTtJQUN0RixJQUFJL0UsTUFBTWdGLE1BQU0sSUFBSXJGLFFBQVFJLEtBQUssQ0FBQ2lGLE1BQU0sRUFBRWpGLE1BQU1pRixNQUFNLEdBQUd4RyxpQkFBaUJtQixRQUFRSSxLQUFLLENBQUNpRixNQUFNO0lBQzlGLElBQUloRixNQUFNaUYsTUFBTSxJQUFJdEYsUUFBUUksS0FBSyxDQUFDa0YsTUFBTSxFQUFFbEYsTUFBTWtGLE1BQU0sR0FBR3pHLGlCQUFpQm1CLFFBQVFJLEtBQUssQ0FBQ2tGLE1BQU07SUFDOUYsSUFBSWpGLE1BQU1WLEVBQUUsSUFBSUssUUFBUUksS0FBSyxDQUFDVCxFQUFFLEVBQUVTLE1BQU1ULEVBQUUsR0FBR007SUFDN0MsSUFBSUksTUFBTWtGLE9BQU8sSUFBSXZGLFFBQVFJLEtBQUssQ0FBQ29GLFFBQVEsRUFBRXBGLE1BQU1tRixPQUFPLEdBQUd4RixJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ0gsUUFBUUksS0FBSyxDQUFDb0YsUUFBUTtJQUM5RyxJQUFJbkYsTUFBTW9GLFdBQVcsSUFBSXpGLFFBQVFJLEtBQUssQ0FBQ3FGLFdBQVcsRUFBRXJGLE1BQU1xRixXQUFXLEdBQUcxRixJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ0gsUUFBUUksS0FBSyxDQUFDcUYsV0FBVztJQUM1SCxJQUFJcEYsTUFBTXFGLFlBQVksSUFBSTFGLFFBQVFJLEtBQUssQ0FBQ3VGLGNBQWMsRUFBRXZGLE1BQU1zRixZQUFZLEdBQUczRixJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ0gsUUFBUUksS0FBSyxDQUFDdUYsY0FBYztJQUNwSSxJQUFJdEYsTUFBTXVGLGVBQWUsSUFBSTVGLFFBQVFJLEtBQUssQ0FBQ3lGLGlCQUFpQixFQUFFekYsTUFBTXdGLGVBQWUsR0FBRzdGLElBQUlHLFlBQVksQ0FBQ0MsU0FBUyxDQUFDSCxRQUFRSSxLQUFLLENBQUN5RixpQkFBaUI7SUFDaEosSUFBSXhGLE1BQU15RixhQUFhLElBQUk5RixRQUFRSSxLQUFLLENBQUMyRixjQUFjLEVBQUUzRixNQUFNMEYsYUFBYSxHQUFHL0YsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNILFFBQVFJLEtBQUssQ0FBQzJGLGNBQWM7SUFDdEksSUFBSTFGLE1BQU0yRixlQUFlLElBQUloRyxRQUFRSSxLQUFLLENBQUM2RixpQkFBaUIsRUFBRTdGLE1BQU00RixlQUFlLEdBQUdqRyxJQUFJRyxZQUFZLENBQUNDLFNBQVMsQ0FBQ0gsUUFBUUksS0FBSyxDQUFDNkYsaUJBQWlCO0lBQ2hKLElBQUk1RixNQUFNNkYsY0FBYyxJQUFJbEcsUUFBUUksS0FBSyxDQUFDK0YsZ0JBQWdCLEVBQUUvRixNQUFNOEYsY0FBYyxHQUFHbkcsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNILFFBQVFJLEtBQUssQ0FBQytGLGdCQUFnQjtJQUM1SSxJQUFJOUYsTUFBTStGLHNCQUFzQixJQUFJcEcsUUFBUUksS0FBSyxDQUFDaUcseUJBQXlCLEVBQ3pFakcsTUFBTWdHLHNCQUFzQixHQUFHckcsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNILFFBQVFJLEtBQUssQ0FBQ2lHLHlCQUF5QjtJQUNuRyxJQUFJaEcsTUFBTWlHLHlCQUF5QixJQUFJdEcsUUFBUUksS0FBSyxDQUFDbUcsNEJBQTRCLEVBQy9FbkcsTUFBTWtHLHlCQUF5QixHQUFHdEcsUUFBUUksS0FBSyxDQUFDbUcsNEJBQTRCO0lBQzlFLElBQUlsRyxNQUFNbUcsS0FBSyxJQUFJeEcsUUFBUUksS0FBSyxDQUFDb0csS0FBSyxFQUFFcEcsTUFBTW9HLEtBQUssR0FBR3hHLFFBQVFJLEtBQUssQ0FBQ29HLEtBQUs7SUFDekUsSUFBSW5HLE1BQU1vRyxLQUFLLElBQUl6RyxRQUFRSSxLQUFLLENBQUNxRyxLQUFLLEVBQUVyRyxNQUFNcUcsS0FBSyxHQUFHekcsUUFBUUksS0FBSyxDQUFDcUcsS0FBSztJQUN6RSxJQUFJcEcsTUFBTXFHLGFBQWEsSUFBSTFHLFFBQVFJLEtBQUssQ0FBQ3VHLGNBQWMsRUFBRXZHLE1BQU1zRyxhQUFhLEdBQUcxRyxRQUFRSSxLQUFLLENBQUN1RyxjQUFjO0lBQzNHLElBQUl0RyxNQUFNdUcsV0FBVyxJQUFJNUcsUUFBUUksS0FBSyxDQUFDd0csV0FBVyxFQUFFeEcsTUFBTXdHLFdBQVcsR0FBRzVHLFFBQVFJLEtBQUssQ0FBQ3dHLFdBQVc7SUFDakcsSUFBSXZHLE1BQU13RyxRQUFRLElBQUk3RyxRQUFRSSxLQUFLLENBQUMwRyxTQUFTLEVBQUUxRyxNQUFNeUcsUUFBUSxHQUFHaEksaUJBQWlCbUIsUUFBUUksS0FBSyxDQUFDMEcsU0FBUztJQUN4RyxJQUFJekcsTUFBTTBHLFNBQVMsSUFBSS9HLFFBQVFJLEtBQUssQ0FBQzJHLFNBQVMsRUFDNUMzRyxNQUFNMkcsU0FBUyxHQUFHL0csUUFBUUksS0FBSyxDQUFDMkcsU0FBUyxFQUFFckgsSUFBSSxDQUFDc0gsV0FBYWpILElBQUlHLFlBQVksQ0FBQzhHLFFBQVEsQ0FBQ2pILEtBQUtpSDtJQUM5RixJQUFJM0csTUFBTTRHLHFCQUFxQixJQUFJakgsUUFBUUksS0FBSyxDQUFDOEcsd0JBQXdCLEVBQ3ZFOUcsTUFBTTZHLHFCQUFxQixHQUFHbEgsSUFBSUcsWUFBWSxDQUFDQyxTQUFTLENBQUNILFFBQVFJLEtBQUssQ0FBQzhHLHdCQUF3QjtJQUVqRyxPQUFPbkgsSUFBSUcsWUFBWSxDQUFDaUgsV0FBVyxDQUFDL0csS0FBSyxDQUFDTCxLQUFLQyxRQUFRSSxLQUFLLEVBQUVBO0FBQ2hFIn0=