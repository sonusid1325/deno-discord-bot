import { VoiceStateToggles } from './toggles/voice.js';
export function transformVoiceState(bot, payload) {
    const props = bot.transformers.desiredProperties.voiceState;
    const voiceState = {};
    if (props.requestToSpeakTimestamp && payload.voiceState.request_to_speak_timestamp) voiceState.requestToSpeakTimestamp = Date.parse(payload.voiceState.request_to_speak_timestamp);
    if (props.channelId && payload.voiceState.channel_id) voiceState.channelId = bot.transformers.snowflake(payload.voiceState.channel_id);
    if (props.guildId) voiceState.guildId = bot.transformers.snowflake(payload.guildId);
    if (props.toggles) voiceState.toggles = new VoiceStateToggles(payload.voiceState);
    if (props.sessionId) voiceState.sessionId = payload.voiceState.session_id;
    if (props.userId && payload.voiceState.user_id) voiceState.userId = bot.transformers.snowflake(payload.voiceState.user_id) ?? 0n;
    return bot.transformers.customizers.voiceState(bot, payload.voiceState, voiceState);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvdm9pY2VTdGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJpZ1N0cmluZywgRGlzY29yZFZvaWNlU3RhdGUgfSBmcm9tICdAZGlzY29yZGVuby90eXBlcydcbmltcG9ydCB0eXBlIHsgSW50ZXJuYWxCb3QsIFZvaWNlU3RhdGUgfSBmcm9tICcuLi9pbmRleC5qcydcbmltcG9ydCB7IFZvaWNlU3RhdGVUb2dnbGVzIH0gZnJvbSAnLi90b2dnbGVzL3ZvaWNlLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtVm9pY2VTdGF0ZShcbiAgYm90OiBJbnRlcm5hbEJvdCxcbiAgcGF5bG9hZDogeyB2b2ljZVN0YXRlOiBEaXNjb3JkVm9pY2VTdGF0ZTsgZ3VpbGRJZDogQmlnU3RyaW5nIH0sXG4pOiB0eXBlb2YgYm90LnRyYW5zZm9ybWVycy4kaW5mZXJyZWRUeXBlcy52b2ljZVN0YXRlIHtcbiAgY29uc3QgcHJvcHMgPSBib3QudHJhbnNmb3JtZXJzLmRlc2lyZWRQcm9wZXJ0aWVzLnZvaWNlU3RhdGVcbiAgY29uc3Qgdm9pY2VTdGF0ZSA9IHt9IGFzIFZvaWNlU3RhdGVcblxuICBpZiAocHJvcHMucmVxdWVzdFRvU3BlYWtUaW1lc3RhbXAgJiYgcGF5bG9hZC52b2ljZVN0YXRlLnJlcXVlc3RfdG9fc3BlYWtfdGltZXN0YW1wKVxuICAgIHZvaWNlU3RhdGUucmVxdWVzdFRvU3BlYWtUaW1lc3RhbXAgPSBEYXRlLnBhcnNlKHBheWxvYWQudm9pY2VTdGF0ZS5yZXF1ZXN0X3RvX3NwZWFrX3RpbWVzdGFtcClcbiAgaWYgKHByb3BzLmNoYW5uZWxJZCAmJiBwYXlsb2FkLnZvaWNlU3RhdGUuY2hhbm5lbF9pZCkgdm9pY2VTdGF0ZS5jaGFubmVsSWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLnZvaWNlU3RhdGUuY2hhbm5lbF9pZClcbiAgaWYgKHByb3BzLmd1aWxkSWQpIHZvaWNlU3RhdGUuZ3VpbGRJZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuZ3VpbGRJZClcbiAgaWYgKHByb3BzLnRvZ2dsZXMpIHZvaWNlU3RhdGUudG9nZ2xlcyA9IG5ldyBWb2ljZVN0YXRlVG9nZ2xlcyhwYXlsb2FkLnZvaWNlU3RhdGUpXG4gIGlmIChwcm9wcy5zZXNzaW9uSWQpIHZvaWNlU3RhdGUuc2Vzc2lvbklkID0gcGF5bG9hZC52b2ljZVN0YXRlLnNlc3Npb25faWRcbiAgaWYgKHByb3BzLnVzZXJJZCAmJiBwYXlsb2FkLnZvaWNlU3RhdGUudXNlcl9pZCkgdm9pY2VTdGF0ZS51c2VySWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLnZvaWNlU3RhdGUudXNlcl9pZCkgPz8gMG5cblxuICByZXR1cm4gYm90LnRyYW5zZm9ybWVycy5jdXN0b21pemVycy52b2ljZVN0YXRlKGJvdCwgcGF5bG9hZC52b2ljZVN0YXRlLCB2b2ljZVN0YXRlKVxufVxuIl0sIm5hbWVzIjpbIlZvaWNlU3RhdGVUb2dnbGVzIiwidHJhbnNmb3JtVm9pY2VTdGF0ZSIsImJvdCIsInBheWxvYWQiLCJwcm9wcyIsInRyYW5zZm9ybWVycyIsImRlc2lyZWRQcm9wZXJ0aWVzIiwidm9pY2VTdGF0ZSIsInJlcXVlc3RUb1NwZWFrVGltZXN0YW1wIiwicmVxdWVzdF90b19zcGVha190aW1lc3RhbXAiLCJEYXRlIiwicGFyc2UiLCJjaGFubmVsSWQiLCJjaGFubmVsX2lkIiwic25vd2ZsYWtlIiwiZ3VpbGRJZCIsInRvZ2dsZXMiLCJzZXNzaW9uSWQiLCJzZXNzaW9uX2lkIiwidXNlcklkIiwidXNlcl9pZCIsImN1c3RvbWl6ZXJzIl0sIm1hcHBpbmdzIjoiQUFFQSxTQUFTQSxpQkFBaUIsUUFBUSxxQkFBb0I7QUFFdEQsT0FBTyxTQUFTQyxvQkFDZEMsR0FBZ0IsRUFDaEJDLE9BQThEO0lBRTlELE1BQU1DLFFBQVFGLElBQUlHLFlBQVksQ0FBQ0MsaUJBQWlCLENBQUNDLFVBQVU7SUFDM0QsTUFBTUEsYUFBYSxDQUFDO0lBRXBCLElBQUlILE1BQU1JLHVCQUF1QixJQUFJTCxRQUFRSSxVQUFVLENBQUNFLDBCQUEwQixFQUNoRkYsV0FBV0MsdUJBQXVCLEdBQUdFLEtBQUtDLEtBQUssQ0FBQ1IsUUFBUUksVUFBVSxDQUFDRSwwQkFBMEI7SUFDL0YsSUFBSUwsTUFBTVEsU0FBUyxJQUFJVCxRQUFRSSxVQUFVLENBQUNNLFVBQVUsRUFBRU4sV0FBV0ssU0FBUyxHQUFHVixJQUFJRyxZQUFZLENBQUNTLFNBQVMsQ0FBQ1gsUUFBUUksVUFBVSxDQUFDTSxVQUFVO0lBQ3JJLElBQUlULE1BQU1XLE9BQU8sRUFBRVIsV0FBV1EsT0FBTyxHQUFHYixJQUFJRyxZQUFZLENBQUNTLFNBQVMsQ0FBQ1gsUUFBUVksT0FBTztJQUNsRixJQUFJWCxNQUFNWSxPQUFPLEVBQUVULFdBQVdTLE9BQU8sR0FBRyxJQUFJaEIsa0JBQWtCRyxRQUFRSSxVQUFVO0lBQ2hGLElBQUlILE1BQU1hLFNBQVMsRUFBRVYsV0FBV1UsU0FBUyxHQUFHZCxRQUFRSSxVQUFVLENBQUNXLFVBQVU7SUFDekUsSUFBSWQsTUFBTWUsTUFBTSxJQUFJaEIsUUFBUUksVUFBVSxDQUFDYSxPQUFPLEVBQUViLFdBQVdZLE1BQU0sR0FBR2pCLElBQUlHLFlBQVksQ0FBQ1MsU0FBUyxDQUFDWCxRQUFRSSxVQUFVLENBQUNhLE9BQU8sS0FBSyxFQUFFO0lBRWhJLE9BQU9sQixJQUFJRyxZQUFZLENBQUNnQixXQUFXLENBQUNkLFVBQVUsQ0FBQ0wsS0FBS0MsUUFBUUksVUFBVSxFQUFFQTtBQUMxRSJ9