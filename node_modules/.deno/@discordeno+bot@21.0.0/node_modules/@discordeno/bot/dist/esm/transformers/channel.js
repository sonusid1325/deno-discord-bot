import { calculatePermissions, iconHashToBigInt } from '../index.js';
import { Permissions } from './toggles/Permissions.js';
import { ChannelToggles } from './toggles/channel.js';
const Mask = (1n << 64n) - 1n;
export function packOverwrites(allow, deny, id, type) {
    return pack64(allow, 0) | pack64(deny, 1) | pack64(id, 2) | pack64(type, 3);
}
function unpack64(v, shift) {
    return v >> BigInt(shift * 64) & Mask;
}
function pack64(v, shift) {
    const b = BigInt(v);
    if (b < 0 || b > Mask) throw new Error('should have been a 64 bit unsigned integer: ' + v.toString());
    return b << BigInt(shift * 64);
}
export function separateOverwrites(v) {
    return [
        Number(unpack64(v, 3)),
        unpack64(v, 2),
        unpack64(v, 0),
        unpack64(v, 1)
    ];
}
export const baseChannel = {
    // This allows typescript to still check for type errors on functions below
    ...undefined,
    get archived () {
        return !!this.toggles?.archived;
    },
    get invitable () {
        return !!this.toggles?.invitable;
    },
    get locked () {
        return !!this.toggles?.locked;
    },
    get nsfw () {
        return !!this.toggles?.nsfw;
    },
    get newlyCreated () {
        return !!this.toggles?.newlyCreated;
    },
    get managed () {
        return !!this.toggles?.managed;
    },
    get permissionOverwrites () {
        return this.internalOverwrites?.map((overwrite)=>{
            const [type, id, allow, deny] = separateOverwrites(overwrite);
            return {
                type,
                id,
                allow: calculatePermissions(allow),
                deny: calculatePermissions(deny)
            };
        }) ?? [];
    },
    get threadMetadata () {
        return {
            archiveTimestamp: this.internalThreadMetadata?.archiveTimestamp,
            createTimestamp: this.internalThreadMetadata?.createTimestamp,
            autoArchiveDuration: this.internalThreadMetadata?.autoArchiveDuration,
            locked: !!this.toggles?.locked,
            invitable: !!this.toggles?.invitable,
            archived: !!this.toggles?.archived
        };
    }
};
export function transformChannel(bot, payload) {
    const channel = Object.create(baseChannel);
    const props = bot.transformers.desiredProperties.channel;
    channel.toggles = new ChannelToggles(payload.channel);
    if (props.id && payload.channel.id) channel.id = bot.transformers.snowflake(payload.channel.id);
    if (props.guildId && (payload.guildId ?? payload.channel.guild_id)) channel.guildId = payload.guildId ? bot.transformers.snowflake(payload.guildId) : bot.transformers.snowflake(payload.channel.guild_id);
    if (props.type) channel.type = payload.channel.type;
    if (props.position) channel.position = payload.channel.position;
    if (props.name && payload.channel.name) channel.name = payload.channel.name;
    if (props.topic && payload.channel.topic) channel.topic = payload.channel.topic;
    if (props.lastMessageId && payload.channel.last_message_id) channel.lastMessageId = bot.transformers.snowflake(payload.channel.last_message_id);
    if (props.bitrate && payload.channel.bitrate) channel.bitrate = payload.channel.bitrate;
    if (props.userLimit) channel.userLimit = payload.channel.user_limit;
    if (props.rateLimitPerUser) channel.rateLimitPerUser = payload.channel.rate_limit_per_user;
    if (props.ownerId && payload.channel.owner_id) channel.ownerId = bot.transformers.snowflake(payload.channel.owner_id);
    if (props.lastPinTimestamp && payload.channel.last_pin_timestamp) channel.lastPinTimestamp = Date.parse(payload.channel.last_pin_timestamp);
    if (props.rtcRegion && payload.channel.rtc_region) channel.rtcRegion = payload.channel.rtc_region;
    if (props.videoQualityMode && payload.channel.video_quality_mode) channel.videoQualityMode = payload.channel.video_quality_mode;
    if (props.messageCount) channel.messageCount = payload.channel.message_count;
    if (props.memberCount) channel.memberCount = payload.channel.member_count;
    if (props.threadMetadata) {
        channel.internalThreadMetadata = {};
        if (payload.channel.thread_metadata?.archive_timestamp) channel.internalThreadMetadata.archiveTimestamp = Date.parse(payload.channel.thread_metadata.archive_timestamp);
        if (payload.channel.thread_metadata?.create_timestamp) channel.internalThreadMetadata.createTimestamp = Date.parse(payload.channel.thread_metadata.create_timestamp);
        if (payload.channel.thread_metadata?.auto_archive_duration) channel.internalThreadMetadata.autoArchiveDuration = payload.channel.thread_metadata.auto_archive_duration;
    }
    if (props.defaultAutoArchiveDuration && payload.channel.default_auto_archive_duration) channel.defaultAutoArchiveDuration = payload.channel.default_auto_archive_duration;
    if (props.permissions && payload.channel.permissions) channel.permissions = new Permissions(payload.channel.permissions);
    if (props.flags) channel.flags = payload.channel.flags;
    if (props.permissionOverwrites && payload.channel.permission_overwrites) channel.internalOverwrites = payload.channel.permission_overwrites.map((o)=>packOverwrites(o.allow ?? '0', o.deny ?? '0', o.id, o.type));
    if (props.parentId && payload.channel.parent_id) channel.parentId = bot.transformers.snowflake(payload.channel.parent_id);
    if (props.recipients && payload.channel.recipients) channel.recipients = payload.channel.recipients.map((u)=>bot.transformers.user(bot, u));
    if (props.icon && payload.channel.icon) channel.icon = iconHashToBigInt(payload.channel.icon);
    if (props.applicationId && payload.channel.application_id) channel.applicationId = bot.transformers.snowflake(payload.channel.application_id);
    if (props.member && payload.channel.member) channel.member = bot.transformers.threadMember(bot, payload.channel.member);
    if (props.totalMessageSent && payload.channel.total_message_sent !== undefined) channel.totalMessageSent = payload.channel.total_message_sent;
    if (props.availableTags && payload.channel.available_tags) channel.availableTags = payload.channel.available_tags.map((x)=>bot.transformers.forumTag(bot, x));
    if (props.appliedTags && payload.channel.applied_tags) channel.appliedTags = payload.channel.applied_tags.map((x)=>bot.transformers.snowflake(x));
    if (props.defaultReactionEmoji && payload.channel.default_reaction_emoji) channel.defaultReactionEmoji = bot.transformers.defaultReactionEmoji(bot, payload.channel.default_reaction_emoji);
    if (props.defaultThreadRateLimitPerUser && payload.channel.default_thread_rate_limit_per_user) channel.defaultThreadRateLimitPerUser = payload.channel.default_thread_rate_limit_per_user;
    if (props.defaultSortOrder && payload.channel.default_sort_order !== undefined) channel.defaultSortOrder = payload.channel.default_sort_order;
    if (props.defaultForumLayout && payload.channel.default_forum_layout !== undefined) channel.defaultForumLayout = payload.channel.default_forum_layout;
    return bot.transformers.customizers.channel(bot, payload.channel, channel);
}
export function transformForumTag(bot, payload) {
    const props = bot.transformers.desiredProperties.forumTag;
    const forumTag = {};
    if (props.id && payload.id) forumTag.id = bot.transformers.snowflake(payload.id);
    if (props.name && payload.name) forumTag.name = payload.name;
    if (props.moderated && payload.moderated) forumTag.moderated = payload.moderated;
    if (props.emojiId && payload.emoji_id) forumTag.emojiId = bot.transformers.snowflake(payload.emoji_id);
    if (props.emojiName && payload.emoji_name) forumTag.emojiName = payload.emoji_name;
    return bot.transformers.customizers.forumTag(bot, payload, forumTag);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy90cmFuc2Zvcm1lcnMvY2hhbm5lbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IEJpZ1N0cmluZywgRGlzY29yZENoYW5uZWwsIERpc2NvcmRGb3J1bVRhZyB9IGZyb20gJ0BkaXNjb3JkZW5vL3R5cGVzJ1xuaW1wb3J0IHsgdHlwZSBDaGFubmVsLCB0eXBlIEZvcnVtVGFnLCB0eXBlIEludGVybmFsQm90LCBjYWxjdWxhdGVQZXJtaXNzaW9ucywgaWNvbkhhc2hUb0JpZ0ludCB9IGZyb20gJy4uL2luZGV4LmpzJ1xuaW1wb3J0IHsgUGVybWlzc2lvbnMgfSBmcm9tICcuL3RvZ2dsZXMvUGVybWlzc2lvbnMuanMnXG5pbXBvcnQgeyBDaGFubmVsVG9nZ2xlcyB9IGZyb20gJy4vdG9nZ2xlcy9jaGFubmVsLmpzJ1xuXG5jb25zdCBNYXNrID0gKDFuIDw8IDY0bikgLSAxblxuXG5leHBvcnQgZnVuY3Rpb24gcGFja092ZXJ3cml0ZXMoYWxsb3c6IHN0cmluZywgZGVueTogc3RyaW5nLCBpZDogc3RyaW5nLCB0eXBlOiBudW1iZXIpOiBiaWdpbnQge1xuICByZXR1cm4gcGFjazY0KGFsbG93LCAwKSB8IHBhY2s2NChkZW55LCAxKSB8IHBhY2s2NChpZCwgMikgfCBwYWNrNjQodHlwZSwgMylcbn1cbmZ1bmN0aW9uIHVucGFjazY0KHY6IGJpZ2ludCwgc2hpZnQ6IG51bWJlcik6IGJpZ2ludCB7XG4gIHJldHVybiAodiA+PiBCaWdJbnQoc2hpZnQgKiA2NCkpICYgTWFza1xufVxuZnVuY3Rpb24gcGFjazY0KHY6IHN0cmluZyB8IG51bWJlciwgc2hpZnQ6IG51bWJlcik6IGJpZ2ludCB7XG4gIGNvbnN0IGIgPSBCaWdJbnQodilcbiAgaWYgKGIgPCAwIHx8IGIgPiBNYXNrKSB0aHJvdyBuZXcgRXJyb3IoJ3Nob3VsZCBoYXZlIGJlZW4gYSA2NCBiaXQgdW5zaWduZWQgaW50ZWdlcjogJyArIHYudG9TdHJpbmcoKSlcbiAgcmV0dXJuIGIgPDwgQmlnSW50KHNoaWZ0ICogNjQpXG59XG5leHBvcnQgZnVuY3Rpb24gc2VwYXJhdGVPdmVyd3JpdGVzKHY6IGJpZ2ludCk6IFtudW1iZXIsIGJpZ2ludCwgYmlnaW50LCBiaWdpbnRdIHtcbiAgcmV0dXJuIFtOdW1iZXIodW5wYWNrNjQodiwgMykpLCB1bnBhY2s2NCh2LCAyKSwgdW5wYWNrNjQodiwgMCksIHVucGFjazY0KHYsIDEpXSBhcyBbbnVtYmVyLCBiaWdpbnQsIGJpZ2ludCwgYmlnaW50XVxufVxuXG5leHBvcnQgY29uc3QgYmFzZUNoYW5uZWw6IEludGVybmFsQm90Wyd0cmFuc2Zvcm1lcnMnXVsnJGluZmVycmVkVHlwZXMnXVsnY2hhbm5lbCddID0ge1xuICAvLyBUaGlzIGFsbG93cyB0eXBlc2NyaXB0IHRvIHN0aWxsIGNoZWNrIGZvciB0eXBlIGVycm9ycyBvbiBmdW5jdGlvbnMgYmVsb3dcbiAgLi4uKHVuZGVmaW5lZCBhcyB1bmtub3duIGFzIEludGVybmFsQm90Wyd0cmFuc2Zvcm1lcnMnXVsnJGluZmVycmVkVHlwZXMnXVsnY2hhbm5lbCddKSxcblxuICBnZXQgYXJjaGl2ZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy50b2dnbGVzPy5hcmNoaXZlZFxuICB9LFxuICBnZXQgaW52aXRhYmxlKCkge1xuICAgIHJldHVybiAhIXRoaXMudG9nZ2xlcz8uaW52aXRhYmxlXG4gIH0sXG4gIGdldCBsb2NrZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy50b2dnbGVzPy5sb2NrZWRcbiAgfSxcbiAgZ2V0IG5zZncoKSB7XG4gICAgcmV0dXJuICEhdGhpcy50b2dnbGVzPy5uc2Z3XG4gIH0sXG4gIGdldCBuZXdseUNyZWF0ZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy50b2dnbGVzPy5uZXdseUNyZWF0ZWRcbiAgfSxcbiAgZ2V0IG1hbmFnZWQoKSB7XG4gICAgcmV0dXJuICEhdGhpcy50b2dnbGVzPy5tYW5hZ2VkXG4gIH0sXG4gIGdldCBwZXJtaXNzaW9uT3ZlcndyaXRlcygpIHtcbiAgICByZXR1cm4gKFxuICAgICAgdGhpcy5pbnRlcm5hbE92ZXJ3cml0ZXM/Lm1hcCgob3ZlcndyaXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IFt0eXBlLCBpZCwgYWxsb3csIGRlbnldID0gc2VwYXJhdGVPdmVyd3JpdGVzKG92ZXJ3cml0ZSlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGFsbG93OiBjYWxjdWxhdGVQZXJtaXNzaW9ucyhhbGxvdyksXG4gICAgICAgICAgZGVueTogY2FsY3VsYXRlUGVybWlzc2lvbnMoZGVueSksXG4gICAgICAgIH1cbiAgICAgIH0pID8/IFtdXG4gICAgKVxuICB9LFxuICBnZXQgdGhyZWFkTWV0YWRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFyY2hpdmVUaW1lc3RhbXA6IHRoaXMuaW50ZXJuYWxUaHJlYWRNZXRhZGF0YT8uYXJjaGl2ZVRpbWVzdGFtcCxcbiAgICAgIGNyZWF0ZVRpbWVzdGFtcDogdGhpcy5pbnRlcm5hbFRocmVhZE1ldGFkYXRhPy5jcmVhdGVUaW1lc3RhbXAsXG4gICAgICBhdXRvQXJjaGl2ZUR1cmF0aW9uOiB0aGlzLmludGVybmFsVGhyZWFkTWV0YWRhdGE/LmF1dG9BcmNoaXZlRHVyYXRpb24sXG4gICAgICBsb2NrZWQ6ICEhdGhpcy50b2dnbGVzPy5sb2NrZWQsXG4gICAgICBpbnZpdGFibGU6ICEhdGhpcy50b2dnbGVzPy5pbnZpdGFibGUsXG4gICAgICBhcmNoaXZlZDogISF0aGlzLnRvZ2dsZXM/LmFyY2hpdmVkLFxuICAgIH1cbiAgfSxcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUNoYW5uZWwoXG4gIGJvdDogSW50ZXJuYWxCb3QsXG4gIHBheWxvYWQ6IHsgY2hhbm5lbDogRGlzY29yZENoYW5uZWw7IGd1aWxkSWQ/OiBCaWdTdHJpbmcgfSxcbik6IHR5cGVvZiBib3QudHJhbnNmb3JtZXJzLiRpbmZlcnJlZFR5cGVzLmNoYW5uZWwge1xuICBjb25zdCBjaGFubmVsID0gT2JqZWN0LmNyZWF0ZShiYXNlQ2hhbm5lbCkgYXMgQ2hhbm5lbFxuICBjb25zdCBwcm9wcyA9IGJvdC50cmFuc2Zvcm1lcnMuZGVzaXJlZFByb3BlcnRpZXMuY2hhbm5lbFxuICBjaGFubmVsLnRvZ2dsZXMgPSBuZXcgQ2hhbm5lbFRvZ2dsZXMocGF5bG9hZC5jaGFubmVsKVxuXG4gIGlmIChwcm9wcy5pZCAmJiBwYXlsb2FkLmNoYW5uZWwuaWQpIGNoYW5uZWwuaWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmNoYW5uZWwuaWQpXG4gIGlmIChwcm9wcy5ndWlsZElkICYmIChwYXlsb2FkLmd1aWxkSWQgPz8gcGF5bG9hZC5jaGFubmVsLmd1aWxkX2lkKSlcbiAgICBjaGFubmVsLmd1aWxkSWQgPSBwYXlsb2FkLmd1aWxkSWQgPyBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmd1aWxkSWQpIDogYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5jaGFubmVsLmd1aWxkX2lkISlcbiAgaWYgKHByb3BzLnR5cGUpIGNoYW5uZWwudHlwZSA9IHBheWxvYWQuY2hhbm5lbC50eXBlXG4gIGlmIChwcm9wcy5wb3NpdGlvbikgY2hhbm5lbC5wb3NpdGlvbiA9IHBheWxvYWQuY2hhbm5lbC5wb3NpdGlvblxuICBpZiAocHJvcHMubmFtZSAmJiBwYXlsb2FkLmNoYW5uZWwubmFtZSkgY2hhbm5lbC5uYW1lID0gcGF5bG9hZC5jaGFubmVsLm5hbWVcbiAgaWYgKHByb3BzLnRvcGljICYmIHBheWxvYWQuY2hhbm5lbC50b3BpYykgY2hhbm5lbC50b3BpYyA9IHBheWxvYWQuY2hhbm5lbC50b3BpY1xuICBpZiAocHJvcHMubGFzdE1lc3NhZ2VJZCAmJiBwYXlsb2FkLmNoYW5uZWwubGFzdF9tZXNzYWdlX2lkKSBjaGFubmVsLmxhc3RNZXNzYWdlSWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmNoYW5uZWwubGFzdF9tZXNzYWdlX2lkKVxuICBpZiAocHJvcHMuYml0cmF0ZSAmJiBwYXlsb2FkLmNoYW5uZWwuYml0cmF0ZSkgY2hhbm5lbC5iaXRyYXRlID0gcGF5bG9hZC5jaGFubmVsLmJpdHJhdGVcbiAgaWYgKHByb3BzLnVzZXJMaW1pdCkgY2hhbm5lbC51c2VyTGltaXQgPSBwYXlsb2FkLmNoYW5uZWwudXNlcl9saW1pdFxuICBpZiAocHJvcHMucmF0ZUxpbWl0UGVyVXNlcikgY2hhbm5lbC5yYXRlTGltaXRQZXJVc2VyID0gcGF5bG9hZC5jaGFubmVsLnJhdGVfbGltaXRfcGVyX3VzZXJcbiAgaWYgKHByb3BzLm93bmVySWQgJiYgcGF5bG9hZC5jaGFubmVsLm93bmVyX2lkKSBjaGFubmVsLm93bmVySWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmNoYW5uZWwub3duZXJfaWQpXG4gIGlmIChwcm9wcy5sYXN0UGluVGltZXN0YW1wICYmIHBheWxvYWQuY2hhbm5lbC5sYXN0X3Bpbl90aW1lc3RhbXApIGNoYW5uZWwubGFzdFBpblRpbWVzdGFtcCA9IERhdGUucGFyc2UocGF5bG9hZC5jaGFubmVsLmxhc3RfcGluX3RpbWVzdGFtcClcbiAgaWYgKHByb3BzLnJ0Y1JlZ2lvbiAmJiBwYXlsb2FkLmNoYW5uZWwucnRjX3JlZ2lvbikgY2hhbm5lbC5ydGNSZWdpb24gPSBwYXlsb2FkLmNoYW5uZWwucnRjX3JlZ2lvblxuICBpZiAocHJvcHMudmlkZW9RdWFsaXR5TW9kZSAmJiBwYXlsb2FkLmNoYW5uZWwudmlkZW9fcXVhbGl0eV9tb2RlKSBjaGFubmVsLnZpZGVvUXVhbGl0eU1vZGUgPSBwYXlsb2FkLmNoYW5uZWwudmlkZW9fcXVhbGl0eV9tb2RlXG4gIGlmIChwcm9wcy5tZXNzYWdlQ291bnQpIGNoYW5uZWwubWVzc2FnZUNvdW50ID0gcGF5bG9hZC5jaGFubmVsLm1lc3NhZ2VfY291bnRcbiAgaWYgKHByb3BzLm1lbWJlckNvdW50KSBjaGFubmVsLm1lbWJlckNvdW50ID0gcGF5bG9hZC5jaGFubmVsLm1lbWJlcl9jb3VudFxuICBpZiAocHJvcHMudGhyZWFkTWV0YWRhdGEpIHtcbiAgICBjaGFubmVsLmludGVybmFsVGhyZWFkTWV0YWRhdGEgPSB7fSBhcyBOb25OdWxsYWJsZTxDaGFubmVsWydpbnRlcm5hbFRocmVhZE1ldGFkYXRhJ10+XG4gICAgaWYgKHBheWxvYWQuY2hhbm5lbC50aHJlYWRfbWV0YWRhdGE/LmFyY2hpdmVfdGltZXN0YW1wKVxuICAgICAgY2hhbm5lbC5pbnRlcm5hbFRocmVhZE1ldGFkYXRhLmFyY2hpdmVUaW1lc3RhbXAgPSBEYXRlLnBhcnNlKHBheWxvYWQuY2hhbm5lbC50aHJlYWRfbWV0YWRhdGEuYXJjaGl2ZV90aW1lc3RhbXApXG4gICAgaWYgKHBheWxvYWQuY2hhbm5lbC50aHJlYWRfbWV0YWRhdGE/LmNyZWF0ZV90aW1lc3RhbXApXG4gICAgICBjaGFubmVsLmludGVybmFsVGhyZWFkTWV0YWRhdGEuY3JlYXRlVGltZXN0YW1wID0gRGF0ZS5wYXJzZShwYXlsb2FkLmNoYW5uZWwudGhyZWFkX21ldGFkYXRhLmNyZWF0ZV90aW1lc3RhbXApXG4gICAgaWYgKHBheWxvYWQuY2hhbm5lbC50aHJlYWRfbWV0YWRhdGE/LmF1dG9fYXJjaGl2ZV9kdXJhdGlvbilcbiAgICAgIGNoYW5uZWwuaW50ZXJuYWxUaHJlYWRNZXRhZGF0YS5hdXRvQXJjaGl2ZUR1cmF0aW9uID0gcGF5bG9hZC5jaGFubmVsLnRocmVhZF9tZXRhZGF0YS5hdXRvX2FyY2hpdmVfZHVyYXRpb25cbiAgfVxuICBpZiAocHJvcHMuZGVmYXVsdEF1dG9BcmNoaXZlRHVyYXRpb24gJiYgcGF5bG9hZC5jaGFubmVsLmRlZmF1bHRfYXV0b19hcmNoaXZlX2R1cmF0aW9uKVxuICAgIGNoYW5uZWwuZGVmYXVsdEF1dG9BcmNoaXZlRHVyYXRpb24gPSBwYXlsb2FkLmNoYW5uZWwuZGVmYXVsdF9hdXRvX2FyY2hpdmVfZHVyYXRpb25cbiAgaWYgKHByb3BzLnBlcm1pc3Npb25zICYmIHBheWxvYWQuY2hhbm5lbC5wZXJtaXNzaW9ucykgY2hhbm5lbC5wZXJtaXNzaW9ucyA9IG5ldyBQZXJtaXNzaW9ucyhwYXlsb2FkLmNoYW5uZWwucGVybWlzc2lvbnMpXG4gIGlmIChwcm9wcy5mbGFncykgY2hhbm5lbC5mbGFncyA9IHBheWxvYWQuY2hhbm5lbC5mbGFnc1xuICBpZiAocHJvcHMucGVybWlzc2lvbk92ZXJ3cml0ZXMgJiYgcGF5bG9hZC5jaGFubmVsLnBlcm1pc3Npb25fb3ZlcndyaXRlcylcbiAgICBjaGFubmVsLmludGVybmFsT3ZlcndyaXRlcyA9IHBheWxvYWQuY2hhbm5lbC5wZXJtaXNzaW9uX292ZXJ3cml0ZXMubWFwKChvKSA9PiBwYWNrT3ZlcndyaXRlcyhvLmFsbG93ID8/ICcwJywgby5kZW55ID8/ICcwJywgby5pZCwgby50eXBlKSlcbiAgaWYgKHByb3BzLnBhcmVudElkICYmIHBheWxvYWQuY2hhbm5lbC5wYXJlbnRfaWQpIGNoYW5uZWwucGFyZW50SWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmNoYW5uZWwucGFyZW50X2lkKVxuICBpZiAocHJvcHMucmVjaXBpZW50cyAmJiBwYXlsb2FkLmNoYW5uZWwucmVjaXBpZW50cykgY2hhbm5lbC5yZWNpcGllbnRzID0gcGF5bG9hZC5jaGFubmVsLnJlY2lwaWVudHMubWFwKCh1KSA9PiBib3QudHJhbnNmb3JtZXJzLnVzZXIoYm90LCB1KSlcbiAgaWYgKHByb3BzLmljb24gJiYgcGF5bG9hZC5jaGFubmVsLmljb24pIGNoYW5uZWwuaWNvbiA9IGljb25IYXNoVG9CaWdJbnQocGF5bG9hZC5jaGFubmVsLmljb24pXG4gIGlmIChwcm9wcy5hcHBsaWNhdGlvbklkICYmIHBheWxvYWQuY2hhbm5lbC5hcHBsaWNhdGlvbl9pZCkgY2hhbm5lbC5hcHBsaWNhdGlvbklkID0gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UocGF5bG9hZC5jaGFubmVsLmFwcGxpY2F0aW9uX2lkKVxuICBpZiAocHJvcHMubWVtYmVyICYmIHBheWxvYWQuY2hhbm5lbC5tZW1iZXIpIGNoYW5uZWwubWVtYmVyID0gYm90LnRyYW5zZm9ybWVycy50aHJlYWRNZW1iZXIoYm90LCBwYXlsb2FkLmNoYW5uZWwubWVtYmVyKVxuICBpZiAocHJvcHMudG90YWxNZXNzYWdlU2VudCAmJiBwYXlsb2FkLmNoYW5uZWwudG90YWxfbWVzc2FnZV9zZW50ICE9PSB1bmRlZmluZWQpIGNoYW5uZWwudG90YWxNZXNzYWdlU2VudCA9IHBheWxvYWQuY2hhbm5lbC50b3RhbF9tZXNzYWdlX3NlbnRcbiAgaWYgKHByb3BzLmF2YWlsYWJsZVRhZ3MgJiYgcGF5bG9hZC5jaGFubmVsLmF2YWlsYWJsZV90YWdzKVxuICAgIGNoYW5uZWwuYXZhaWxhYmxlVGFncyA9IHBheWxvYWQuY2hhbm5lbC5hdmFpbGFibGVfdGFncy5tYXAoKHgpID0+IGJvdC50cmFuc2Zvcm1lcnMuZm9ydW1UYWcoYm90LCB4KSlcbiAgaWYgKHByb3BzLmFwcGxpZWRUYWdzICYmIHBheWxvYWQuY2hhbm5lbC5hcHBsaWVkX3RhZ3MpIGNoYW5uZWwuYXBwbGllZFRhZ3MgPSBwYXlsb2FkLmNoYW5uZWwuYXBwbGllZF90YWdzLm1hcCgoeCkgPT4gYm90LnRyYW5zZm9ybWVycy5zbm93Zmxha2UoeCkpXG4gIGlmIChwcm9wcy5kZWZhdWx0UmVhY3Rpb25FbW9qaSAmJiBwYXlsb2FkLmNoYW5uZWwuZGVmYXVsdF9yZWFjdGlvbl9lbW9qaSlcbiAgICBjaGFubmVsLmRlZmF1bHRSZWFjdGlvbkVtb2ppID0gYm90LnRyYW5zZm9ybWVycy5kZWZhdWx0UmVhY3Rpb25FbW9qaShib3QsIHBheWxvYWQuY2hhbm5lbC5kZWZhdWx0X3JlYWN0aW9uX2Vtb2ppKVxuICBpZiAocHJvcHMuZGVmYXVsdFRocmVhZFJhdGVMaW1pdFBlclVzZXIgJiYgcGF5bG9hZC5jaGFubmVsLmRlZmF1bHRfdGhyZWFkX3JhdGVfbGltaXRfcGVyX3VzZXIpXG4gICAgY2hhbm5lbC5kZWZhdWx0VGhyZWFkUmF0ZUxpbWl0UGVyVXNlciA9IHBheWxvYWQuY2hhbm5lbC5kZWZhdWx0X3RocmVhZF9yYXRlX2xpbWl0X3Blcl91c2VyXG4gIGlmIChwcm9wcy5kZWZhdWx0U29ydE9yZGVyICYmIHBheWxvYWQuY2hhbm5lbC5kZWZhdWx0X3NvcnRfb3JkZXIgIT09IHVuZGVmaW5lZCkgY2hhbm5lbC5kZWZhdWx0U29ydE9yZGVyID0gcGF5bG9hZC5jaGFubmVsLmRlZmF1bHRfc29ydF9vcmRlclxuICBpZiAocHJvcHMuZGVmYXVsdEZvcnVtTGF5b3V0ICYmIHBheWxvYWQuY2hhbm5lbC5kZWZhdWx0X2ZvcnVtX2xheW91dCAhPT0gdW5kZWZpbmVkKVxuICAgIGNoYW5uZWwuZGVmYXVsdEZvcnVtTGF5b3V0ID0gcGF5bG9hZC5jaGFubmVsLmRlZmF1bHRfZm9ydW1fbGF5b3V0XG5cbiAgcmV0dXJuIGJvdC50cmFuc2Zvcm1lcnMuY3VzdG9taXplcnMuY2hhbm5lbChib3QsIHBheWxvYWQuY2hhbm5lbCwgY2hhbm5lbClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zZm9ybUZvcnVtVGFnKGJvdDogSW50ZXJuYWxCb3QsIHBheWxvYWQ6IERpc2NvcmRGb3J1bVRhZyk6IHR5cGVvZiBib3QudHJhbnNmb3JtZXJzLiRpbmZlcnJlZFR5cGVzLmZvcnVtVGFnIHtcbiAgY29uc3QgcHJvcHMgPSBib3QudHJhbnNmb3JtZXJzLmRlc2lyZWRQcm9wZXJ0aWVzLmZvcnVtVGFnXG4gIGNvbnN0IGZvcnVtVGFnID0ge30gYXMgRm9ydW1UYWdcblxuICBpZiAocHJvcHMuaWQgJiYgcGF5bG9hZC5pZCkgZm9ydW1UYWcuaWQgPSBib3QudHJhbnNmb3JtZXJzLnNub3dmbGFrZShwYXlsb2FkLmlkKVxuICBpZiAocHJvcHMubmFtZSAmJiBwYXlsb2FkLm5hbWUpIGZvcnVtVGFnLm5hbWUgPSBwYXlsb2FkLm5hbWVcbiAgaWYgKHByb3BzLm1vZGVyYXRlZCAmJiBwYXlsb2FkLm1vZGVyYXRlZCkgZm9ydW1UYWcubW9kZXJhdGVkID0gcGF5bG9hZC5tb2RlcmF0ZWRcbiAgaWYgKHByb3BzLmVtb2ppSWQgJiYgcGF5bG9hZC5lbW9qaV9pZCkgZm9ydW1UYWcuZW1vamlJZCA9IGJvdC50cmFuc2Zvcm1lcnMuc25vd2ZsYWtlKHBheWxvYWQuZW1vamlfaWQpXG4gIGlmIChwcm9wcy5lbW9qaU5hbWUgJiYgcGF5bG9hZC5lbW9qaV9uYW1lKSBmb3J1bVRhZy5lbW9qaU5hbWUgPSBwYXlsb2FkLmVtb2ppX25hbWVcblxuICByZXR1cm4gYm90LnRyYW5zZm9ybWVycy5jdXN0b21pemVycy5mb3J1bVRhZyhib3QsIHBheWxvYWQsIGZvcnVtVGFnKVxufVxuIl0sIm5hbWVzIjpbImNhbGN1bGF0ZVBlcm1pc3Npb25zIiwiaWNvbkhhc2hUb0JpZ0ludCIsIlBlcm1pc3Npb25zIiwiQ2hhbm5lbFRvZ2dsZXMiLCJNYXNrIiwicGFja092ZXJ3cml0ZXMiLCJhbGxvdyIsImRlbnkiLCJpZCIsInR5cGUiLCJwYWNrNjQiLCJ1bnBhY2s2NCIsInYiLCJzaGlmdCIsIkJpZ0ludCIsImIiLCJFcnJvciIsInRvU3RyaW5nIiwic2VwYXJhdGVPdmVyd3JpdGVzIiwiTnVtYmVyIiwiYmFzZUNoYW5uZWwiLCJ1bmRlZmluZWQiLCJhcmNoaXZlZCIsInRvZ2dsZXMiLCJpbnZpdGFibGUiLCJsb2NrZWQiLCJuc2Z3IiwibmV3bHlDcmVhdGVkIiwibWFuYWdlZCIsInBlcm1pc3Npb25PdmVyd3JpdGVzIiwiaW50ZXJuYWxPdmVyd3JpdGVzIiwibWFwIiwib3ZlcndyaXRlIiwidGhyZWFkTWV0YWRhdGEiLCJhcmNoaXZlVGltZXN0YW1wIiwiaW50ZXJuYWxUaHJlYWRNZXRhZGF0YSIsImNyZWF0ZVRpbWVzdGFtcCIsImF1dG9BcmNoaXZlRHVyYXRpb24iLCJ0cmFuc2Zvcm1DaGFubmVsIiwiYm90IiwicGF5bG9hZCIsImNoYW5uZWwiLCJPYmplY3QiLCJjcmVhdGUiLCJwcm9wcyIsInRyYW5zZm9ybWVycyIsImRlc2lyZWRQcm9wZXJ0aWVzIiwic25vd2ZsYWtlIiwiZ3VpbGRJZCIsImd1aWxkX2lkIiwicG9zaXRpb24iLCJuYW1lIiwidG9waWMiLCJsYXN0TWVzc2FnZUlkIiwibGFzdF9tZXNzYWdlX2lkIiwiYml0cmF0ZSIsInVzZXJMaW1pdCIsInVzZXJfbGltaXQiLCJyYXRlTGltaXRQZXJVc2VyIiwicmF0ZV9saW1pdF9wZXJfdXNlciIsIm93bmVySWQiLCJvd25lcl9pZCIsImxhc3RQaW5UaW1lc3RhbXAiLCJsYXN0X3Bpbl90aW1lc3RhbXAiLCJEYXRlIiwicGFyc2UiLCJydGNSZWdpb24iLCJydGNfcmVnaW9uIiwidmlkZW9RdWFsaXR5TW9kZSIsInZpZGVvX3F1YWxpdHlfbW9kZSIsIm1lc3NhZ2VDb3VudCIsIm1lc3NhZ2VfY291bnQiLCJtZW1iZXJDb3VudCIsIm1lbWJlcl9jb3VudCIsInRocmVhZF9tZXRhZGF0YSIsImFyY2hpdmVfdGltZXN0YW1wIiwiY3JlYXRlX3RpbWVzdGFtcCIsImF1dG9fYXJjaGl2ZV9kdXJhdGlvbiIsImRlZmF1bHRBdXRvQXJjaGl2ZUR1cmF0aW9uIiwiZGVmYXVsdF9hdXRvX2FyY2hpdmVfZHVyYXRpb24iLCJwZXJtaXNzaW9ucyIsImZsYWdzIiwicGVybWlzc2lvbl9vdmVyd3JpdGVzIiwibyIsInBhcmVudElkIiwicGFyZW50X2lkIiwicmVjaXBpZW50cyIsInUiLCJ1c2VyIiwiaWNvbiIsImFwcGxpY2F0aW9uSWQiLCJhcHBsaWNhdGlvbl9pZCIsIm1lbWJlciIsInRocmVhZE1lbWJlciIsInRvdGFsTWVzc2FnZVNlbnQiLCJ0b3RhbF9tZXNzYWdlX3NlbnQiLCJhdmFpbGFibGVUYWdzIiwiYXZhaWxhYmxlX3RhZ3MiLCJ4IiwiZm9ydW1UYWciLCJhcHBsaWVkVGFncyIsImFwcGxpZWRfdGFncyIsImRlZmF1bHRSZWFjdGlvbkVtb2ppIiwiZGVmYXVsdF9yZWFjdGlvbl9lbW9qaSIsImRlZmF1bHRUaHJlYWRSYXRlTGltaXRQZXJVc2VyIiwiZGVmYXVsdF90aHJlYWRfcmF0ZV9saW1pdF9wZXJfdXNlciIsImRlZmF1bHRTb3J0T3JkZXIiLCJkZWZhdWx0X3NvcnRfb3JkZXIiLCJkZWZhdWx0Rm9ydW1MYXlvdXQiLCJkZWZhdWx0X2ZvcnVtX2xheW91dCIsImN1c3RvbWl6ZXJzIiwidHJhbnNmb3JtRm9ydW1UYWciLCJtb2RlcmF0ZWQiLCJlbW9qaUlkIiwiZW1vamlfaWQiLCJlbW9qaU5hbWUiLCJlbW9qaV9uYW1lIl0sIm1hcHBpbmdzIjoiQUFDQSxTQUF3REEsb0JBQW9CLEVBQUVDLGdCQUFnQixRQUFRLGNBQWE7QUFDbkgsU0FBU0MsV0FBVyxRQUFRLDJCQUEwQjtBQUN0RCxTQUFTQyxjQUFjLFFBQVEsdUJBQXNCO0FBRXJELE1BQU1DLE9BQU8sQUFBQyxDQUFBLEVBQUUsSUFBSSxHQUFHLEFBQUQsSUFBSyxFQUFFO0FBRTdCLE9BQU8sU0FBU0MsZUFBZUMsS0FBYSxFQUFFQyxJQUFZLEVBQUVDLEVBQVUsRUFBRUMsSUFBWTtJQUNsRixPQUFPQyxPQUFPSixPQUFPLEtBQUtJLE9BQU9ILE1BQU0sS0FBS0csT0FBT0YsSUFBSSxLQUFLRSxPQUFPRCxNQUFNO0FBQzNFO0FBQ0EsU0FBU0UsU0FBU0MsQ0FBUyxFQUFFQyxLQUFhO0lBQ3hDLE9BQU8sQUFBQ0QsS0FBS0UsT0FBT0QsUUFBUSxNQUFPVDtBQUNyQztBQUNBLFNBQVNNLE9BQU9FLENBQWtCLEVBQUVDLEtBQWE7SUFDL0MsTUFBTUUsSUFBSUQsT0FBT0Y7SUFDakIsSUFBSUcsSUFBSSxLQUFLQSxJQUFJWCxNQUFNLE1BQU0sSUFBSVksTUFBTSxpREFBaURKLEVBQUVLLFFBQVE7SUFDbEcsT0FBT0YsS0FBS0QsT0FBT0QsUUFBUTtBQUM3QjtBQUNBLE9BQU8sU0FBU0ssbUJBQW1CTixDQUFTO0lBQzFDLE9BQU87UUFBQ08sT0FBT1IsU0FBU0MsR0FBRztRQUFLRCxTQUFTQyxHQUFHO1FBQUlELFNBQVNDLEdBQUc7UUFBSUQsU0FBU0MsR0FBRztLQUFHO0FBQ2pGO0FBRUEsT0FBTyxNQUFNUSxjQUF3RTtJQUNuRiwyRUFBMkU7SUFDM0UsR0FBSUMsU0FBUztJQUViLElB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